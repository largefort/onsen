"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8262],{1321:function(e,t,n){var i,r=n(7294);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18"},e),i||(i=r.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M9 0v9H0M9 18V9h9"})))}},5557:function(e,t,n){n.r(t);var i,r,a,o,s=n(7294);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.default=function(e){return s.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:12,height:13,fill:"none",viewBox:"0 0 17 20"},e),i||(i=s.createElement("circle",{cx:14.152,cy:3.076,r:2.769,fill:"currentColor"})),r||(r=s.createElement("circle",{cx:3.074,cy:10,r:2.769,fill:"currentColor"})),a||(a=s.createElement("circle",{cx:14.152,cy:16.922,r:2.769,fill:"currentColor"})),o||(o=s.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M14.15 16.923 3.073 10 14.15 3.077"})))}},2907:function(e,t,n){var i,r=n(7294);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.Z=function(e){return r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:10,height:5,fill:"none"},e),i||(i=r.createElement("path",{fill:"currentColor",d:"M5.238.743.996 4.986H9.48L5.238.743Z"})))}},4689:function(e,t,n){n.d(t,{NG:function(){return C},n8:function(){return A}});var i,r,a=n(1010),o=n(7582),s=n(5893),c=n(7294);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var l=function(e){return c.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:17,height:17,fill:"none"},e),i||(i=c.createElement("circle",{cx:8.5,cy:8.5,r:8.5,fill:"#504D60"})),r||(r=c.createElement("path",{fill:"#fff",d:"m11.168 3.943 2.137 2.137-5.395 5.395-2.137-2.137zM4.813 10.299l2.137 2.136-2.383.246.245-2.382Z"})))},d=n(362),g=n(3918),p=n(5152),f=n.n(p),h=n(1664),v=n.n(h),m=n(8262),_=n(9927),E=f()(function(){return n.e(4137).then(n.bind(n,4137))},{loadableGenerated:{webpack:function(){return[4137]}}}),A=function(e){var t=e.publicName,n=e.isEditable,i=e.isAgentMaker,r=e.avatar,a=e.title,o=e.onClick,c=e.showStats,u=e.shouldPushAvatarToTop,l=e.chatScrollState,d=e.type,g=e.avatarDimensions,p=e.namesClassName,f=e.publicNameClassName,h=e.titleClassName,m=e.containerClassName,_=e.shouldShowReadProfile,E=void 0!==_&&_,A=e.onClickProfile,b=e.nameContainerClassName,y=e.innerLink,w=e.isRFM,I=void 0!==w&&w?v():"div";return(0,s.jsxs)(I,{as:i||!n?"/~".concat(t):"/~".concat(t,"/edit"),href:i||!n?"/~[slug]":"/~[slug]/edit",onClick:o,className:"grid ".concat(void 0===m?"":m,"\n\n      ").concat(E?"grid-cols-auto-1fr gap-x-2 !gap-y-0":"","\n      ").concat("TOP"===(void 0===l?"TOP":l)?"grid-rows-auto-1fr gap-y-2 lg:gap-x-[11px] w-full":"grid-cols-auto-1fr gap-x-2.5 lg:gap-x-2 ","\n      ").concat(u?"lg:px-2.5":""," max-lg:gap-y-3 lg:justify-start overflow-hidden truncate place-items-center items-center lg:w-fit \n   ").concat(""," lg:gap-x-[12px]\n       ").concat(i?"cursor-default":""),children:[(0,s.jsx)(x,{dimensions:void 0===g?"":g,isEditable:n,type:d,isAgentMaker:i,avatar:r,innerLink:void 0!==y&&y}),(0,s.jsx)(C,{publicNameClassName:void 0===f?"":f,titleClassName:void 0===h?"":h,className:void 0===p?"":p,title:a,publicName:t,type:d,showStats:c,shouldShowReadProfile:E,onClickProfile:A,nameContainerClassName:void 0===b?"":b})]})},x=function(e){var t=e.type,n=e.avatar,i=e.isAgentMaker,r=e.isEditable,a=e.dimensions,o=e.innerLink,c=void 0!==o&&o,u=(0,d.a)(),g=u.ownsActiveAgent,p=u.agentInfo.publicName,f=c?v():"div";return(0,s.jsxs)(f,{onClick:function(){if(c)try{window.parent.postMessage({event:"AGENT_CHANGE",data:p},"https://studio.oneai.com")}catch(e){}},as:i||!r?"/~".concat(p):"/~".concat(p,"/edit"),href:i||!r?"/~[slug]":"/~[slug]/edit",className:"relative",children:[(0,s.jsx)(E,{dimensions:(void 0===a?"":a)||("BIG"===t?" !h-[60px] !w-[60px] !clip-60":" !h-[42px] !w-[42px] !clip-42"),containerClassName:"","data-cy":"pencil_icon_to_edit",avatar:n||""}),r?(0,s.jsx)("figure",{"data-cy":"pencil_icon_to_edit",className:"absolute right-0 bottom-0 ".concat(i||!g?"hidden":""),children:(0,s.jsx)(l,{})}):null]})},C=function(e){var t=e.type,n=e.publicName,i=e.title,r=e.showStats,a=e.className,o=e.publicNameClassName,c=e.titleClassName,u=e.shouldShowReadProfile,l=e.onClickProfile,d=e.nameContainerClassName;return(0,s.jsx)("div",{className:"grid grid-rows-auto-1fr justify-self-start ".concat(d),children:(0,s.jsxs)("div",{className:"grid grid-rows-auto-1fr ".concat(void 0===a?"lg:gap-y-[15px]":a," ").concat("BIG"===t?"gap-x-3 gap-y-2 max-lg:justify-items-center":"gap-y-1"),children:[(0,s.jsx)(y,{className:void 0===c?"":c,title:i}),u?(0,s.jsx)(b,{onClickProfile:l}):null,u?null:(0,s.jsxs)("div",{className:r&&"BIG"===t?"grid grid-cols-auto-1fr max-lg:gap-x-4  gap-x-2.5 max-lg:px-4 items-center":"grid",children:[(0,s.jsx)(w,{className:void 0===o?"":o,publicName:n}),"BIG"===t?(0,s.jsx)(_.default,{dimensions:"!h-[19px] !w-[19px]"}):null]})]})})},b=function(e){var t,n=e.onClickProfile,i=(0,d.a)(),r=i.agentInfo.publicName,c=i.methods.insertProfileMessage,u=(0,m.useEventLogger)().eventLogger,l=(t=(0,a._)(function(e){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return e.preventDefault(),e.stopPropagation(),[4,c()];case 1:return t.sent(),n&&(n(e),u(g.V1.READ_PROFILE_CLICKED)),[2]}})}),function(e){return t.apply(this,arguments)});return(0,s.jsx)(v(),{as:"/~".concat("TEMPORARY_AGENT"===r?"agentmaker":r,"/profile"),href:"/~[slug]/profile",onClick:l,className:"w-fit text-left pt-1","aria-label":"Show profile message",children:(0,s.jsx)("span",{className:"text-left w-fit font-mono underline",children:"Read profile"})})},y=function(e){var t=e.title,n=e.className,i=(0,d.a)().chatScrollState;return(0,s.jsx)("div",{"data-cy":"agnet_menu_display_name",className:"grid",children:(0,s.jsx)("h1",{"data-cy":"agnet_menu_display_name_title",title:t,className:"dark:text-white font-mono uppercase lg:text-xl !leading-[18px] font-normal truncate lg:text-center text-ellipsis overflow-hidden ".concat("TOP"===i?"text-lg leading-4":"leading-4"," min-w-0 ").concat(void 0===n?"":n),children:t||(0,s.jsx)(s.Fragment,{children:"\xa0"})})})},w=function(e){var t=e.publicName,n=e.className,i=(0,d.a)().chatScrollState;return(0,s.jsxs)("p",{"data-cy":"agnet_menu_public_name",className:"font-mono font-normal lg:text-headerText text-[#AAA6B5] truncate text-ellipsis overflow-hidden ".concat("TOP"===i?"text-sm leading-4":"text-xs leading-4"," ").concat(n),children:["~","agentmaker"===t||"TEMPORARY_AGENT"===t?"AgentMaker":t]})}},1253:function(e,t,n){var i=n(5893),r=n(548);t.Z=function(e){var t=e.isMobile;return(0,i.jsxs)("div",{className:"grid grid-cols-1fr-1fr items-center gap-x-2 font-medium text-sm lg:pt-6 ".concat(t?"px-2 py-4":""),children:[(0,i.jsx)(r.Z,{id:"4",isChatActionButton:!0,isMobile:t,name:"Embed your agent"}),(0,i.jsx)(r.Z,{id:"2",isChatActionButton:!0,isMobile:t,name:"Personalize your agent"})]})}},1851:function(e,t,n){n.r(t),n.d(t,{default:function(){return C},useProgress:function(){return x}});var i=n(1010),r=n(4043),a=n(7582),o=n(5893),s=n(2060),c=n(362),u=n(7211),l=n(3918),d=n(4862),g=n(1016),p=n(7294),f=n(8262),h=n(3197),v=function(e){var t=e.progress;return(0,o.jsx)("div",{className:"bg-lightBackground h-full relative",children:(0,o.jsx)("div",{className:"absolute top-0 left-0 h-full bg-cyan transition-width duration-500 ease-in-out",style:{width:"".concat(100*t,"%")}})})},m=function(e){var t,n=e.setAbortState,r=e.abortState,s=(0,f.useEventLogger)().eventLogger,d=(0,h.aF)().data,g=(0,c.a)(),p=g.tasksInProgress,v=g.methods,m=v.setTasksInProgress,_=v.setStoppedCurrentUpload,E=(t=(0,i._)(function(){return(0,a.Jh)(this,function(e){var t;return n("ABORTING"),p.forEach((t=(0,i._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,u.lp)(e,null==d?void 0:d.apiKey)];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)})),_(!0),s(l.V1.UPLOAD_STOP_CLICKED),m([]),[2]})}),function(){return t.apply(this,arguments)});return(0,o.jsx)("button",{onClick:E,className:"text-xs font-inter ".concat("ABORTING"===r?"text-lightText":"dark:text-cyan text-pink"," grid justify-self-end"),"aria-label":"Cancel upload",children:"PENDING"===r?"stop":""})},_=function(e){var t=e.isOptimistic,n=(0,r._)((0,p.useState)(0),2),i=n[0],a=n[1],u=(0,s._3)().data,d=(0,f.useEventLogger)().eventLogger,h=(0,r._)((0,p.useState)("PENDING"),2),m=h[0],_=h[1],A=(0,c.a)(),x=A.isOnline,C=A.chatScrollState,b=A.isAtWidgetOrIframe,y=A.tasksInProgress;if((0,p.useEffect)(function(){var e=0,t=setInterval(function(){e<.25&&a(e+=.0025)},100);return d(l.V1.PROGRESS_BAR_SHOWN,{pages_count:null==u?void 0:u.in_progress_item_count}),function(){clearInterval(t)}},[]),(0,p.useEffect)(function(){y.length&&_("PENDING")},[y]),"ABORTING"===m||!x||b)return null;var w=(null==u?void 0:u.progress_percent)||0;return(0,o.jsx)("div",{style:{top:"MIDDLE"===C?"58px":"0px",zIndex:1,width:"100%"},className:"MIDDLE"===C?"fixed lg:sticky":"relative",children:(0,o.jsxs)(g.m.div,{className:" lg:bg-panel grid grid-rows-auto-1fr w-full lg:pt-2",children:[(0,o.jsx)(g.m.div,{className:"h-2 lg:h-[27px]",children:(0,o.jsx)(v,{progress:t?i:u?w/100:0})}),(0,o.jsx)(E,{abortState:m,setAbortState:_})]})})},E=function(e){var t,n=e.abortState,i=e.setAbortState,r=(0,s._3)().data,a=(0,c.a)().uploadData,u=Number(null==r?void 0:r.recent_completed_count)||0,l=(null==r?void 0:null===(t=r.in_process_file_names)||void 0===t?void 0:t[0])||"",g=(null==a?void 0:a.type)==="FILE";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{"data-cy":"page_proccess_number",className:"lg:grid hidden text-xs font-mono left-0 whitespace-nowrap grid-cols-1fr-auto !w-full py-2 justify-between pr-[15px] pl-[31px]",children:[(0,o.jsxs)("span",{className:"whitespace-nowrap text-ellipsis truncate text-lightText",children:["Learning document ",u||1,"/",g?1:d.rz.max_count,l?":":null," ",(0,o.jsx)(A,{path:l})]}),u?(0,o.jsx)(m,{abortState:n,setAbortState:i}):null]}),(0,o.jsxs)("div",{className:"lg:hidden text-xs bg-background font-inter py-2 lg:px-3 px-1 gap-x-1 whitespace-nowrap grid grid-cols-1fr-auto !w-full justify-between",children:[(0,o.jsxs)("span",{className:"text-lightText whitespace-nowrap text-ellipsis truncate",children:["Processing page: ",u||1]}),u?(0,o.jsx)(m,{abortState:n,setAbortState:i}):null]})]})},A=function(e){var t=e.path,n=(0,c.a)().uploadData,i=(null==n?void 0:n.type)==="FILE";if(!t)return null;try{var r=i?t:new URL(t).pathname;return(0,o.jsxs)(o.Fragment,{children:[r,"..."]})}catch(e){return null}},x=function(){var e=(0,s._3)(),t=e.data,n=e.error,i=(0,c.a)(),r=i.processingItems,a=i.stoppedCurrentUpload,o=t&&25>Math.max((null==t?void 0:t.progress_percent)||0,0),u=(null==r?void 0:r.length)&&!0===o||(null==r?void 0:r.length)&&!t||(null==r?void 0:r.length)&&(null==t?void 0:t.active_status)==="idle"||(null==t?void 0:t.active_status)==="in progress",l=!0===o&&!0===u&&(null==t?void 0:t.active_status)!=="idle",d=((null==t?void 0:t.active_status)==="in progress"||l)&&!a;return{data:t,error:n,itemBelowThreshold:o,isOptimisticProcessing:l,isShowingProgressBar:d}},C=function(){var e=x(),t=e.data,n=e.error,i=e.isOptimisticProcessing;return i?(0,o.jsx)(_,{isOptimistic:i}):(null==t?void 0:t.active_status)==="idle"||!t||n?null:(0,o.jsx)(_,{isOptimistic:i})}},1443:function(e,t,n){n.d(t,{x:function(){return w}});var i=n(1010),r=n(2253),a=n(4932),o=n(4043),s=n(7582),c=n(5893),u=n(1321),l=n(8262),d=n(362),g=n(2060),p=n(7211),f=n(9844),h=n(3918),v=n(2336),m=n(6164),_=n(4862),E=n(3293),A=n(1664),x=n.n(A),C=n(1163),b=n(7294),y=function(e){var t=e.onChange,n=e.children,i=(0,b.useRef)(null),r=(0,l.useEventLogger)().eventLogger,a=(0,d.a)(),o=a.triggerFileUpload,s=a.methods.setTriggerFileUpload,u=(0,b.useRef)(null);return(0,b.useEffect)(function(){if(o){var e;null===(e=i.current)||void 0===e||e.click(),s(!1)}},[o]),(0,c.jsxs)("div",{"data-cy":"choose_file_button",className:"relative inline-block ",children:[(0,c.jsx)("label",{htmlFor:"uploadFile",className:"sr-only",children:"Choose file"}),(0,c.jsx)("input",{accept:f.gz,ref:i,className:"opacity-0 absolute w-full h-full left-0 top-0 z-[2] hidden",id:"uploadFile",type:"file",onChange:function(e){e.target.files&&e.target.files.length>0&&(t(e.target.files[0]),s(!1))}}),(0,c.jsx)("button",{"data-cy":"choose_file_button_mobile",onMouseOver:function(e){(0,_.s2)()||u.current||(u.current=window.setTimeout(function(){r(h.V1.UPLOAD_FILE_HOVERED),u.current=null},500))},onMouseLeave:function(){u.current&&(clearTimeout(u.current),u.current=null)},className:"cursor-pointer  !text-[#BABABA]",onClick:function(){var e=(0,_.s2)();i.current&&(e?r(h.V1.UPLOAD_FILE_TAPPED):r(h.V1.UPLOAD_FILE_CLICKED),i.current.click())},children:n})]})},w=function(e){var t,n,u=e.chatContentWidth,h=e.isWidget,E=e.isIndependant,A=e.isSupportAgent,x=e.isStudioPreview,y=e.isWidgetChatActive;e.suggestedIdx,e.clickedSend;var w=(0,g.x)().canAddData,N=(0,o._)((0,b.useState)(""),2),D=N[0],k=N[1],O=(0,l.useEventLogger)().eventLogger,L=(0,p.mi)().addAgentURL,R=(0,o._)((0,b.useState)(void 0),2),j=R[0],P=R[1],M=(0,d.a)(),G=M.isAgentMaker,U=M.isParamsReady,F=M.agentInfo,B=F.agentId,K=F.publicName,H=F.displayName,W=F.sampleQuestions,V=F.teaserText,Y=F.configuration,J=Y.showCreateAgentLink,Z=Y.showOneAiBranding,q=Y.widget,z=M.methods,Q=z.setInsertMode,X=z.insertToChatHistory,$=z.setRefs,ee=z.setTouchedAgentMakerBox,et=M.insertMode,en=M.triggerFileUpload,ei=M.chatHistory,er=(0,C.useRouter)().asPath.endsWith("/edit"),ea=(0,g.MI)().queryAgent,eo=(0,b.useRef)(null),es=(0,o._)((0,b.useState)(!1),2),ec=es[0],eu=es[1],el="https://".concat(D).trim(),ed=(0,f.mQ)(el),eg=!!E||et,ep=(0,o._)((0,b.useState)(!0),2),ef=ep[0],eh=ep[1];(0,b.useEffect)(function(){$(function(e){return(0,a._)((0,r._)({},e),{input:eo})}),window.innerWidth<f.q9?eh("true"===window.localStorage.getItem("everFocusedInput")):eh(!0)},[]);var ev=function(e,t,n){e&&e.preventDefault();var r,a,o=D||(0,_.x1)(H,K,void 0!==t?W[t]:void 0,void 0,!0);if(D||"widget"===n){if(eg||ed&&w){if(X({finished:!0,id:0,speaker:"user",utterance:el,target_agent:B}),!ed){X({finished:!0,speaker:_.kW,utterance:"The URL you provided is invalid. Please double-check the URL and ensure it is entered correctly.",id:0,target_agent:B}),E||k("");return}setTimeout((0,i._)(function(){return(0,s.Jh)(this,function(e){switch(e.label){case 0:return[4,L({url:el})];case 1:return e.sent(),[2]}})}),1)}else ea(o,O);Q(!1),E||(k(""),null==eo||null===(r=eo.current)||void 0===r||r.focus()),em&&(null===(a=eo.current)||void 0===a||a.blur()),P(o)}};(0,b.useEffect)(function(){if(eg&&!G){var e;null===(e=eo.current)||void 0===e||e.focus()}ed||k("")},[eg]),(0,b.useEffect)(function(){ed&&w&&!E&&Q(!0);var e=D.toLowerCase();(e.includes("http://")||e.includes("https://"))&&w&&k(function(e){return e.replace(/https?:\/\//gi,"")}),E?ee(!0):ee(!1),P(void 0)},[D]),(0,b.useEffect)(function(){en&&Q(!0)},[en]),(0,b.useEffect)(function(){em||setTimeout(function(){var e;null===(e=eo.current)||void 0===e||e.focus()},10)},[eo]);var em=(0,_.s2)(),e_=em?q.mobile:q.desktop,eE=J||Z,eA="side"===e_.widget_type,ex=null==ei?void 0:ei[ei.length-1],eC=["url","email"].includes(null==ex?void 0:ex.input_type)&&!E?"input":ec?"textarea":"input";(0,b.useEffect)(function(){var e,t;ec?(null===(e=eo.current)||void 0===e||e.focus(),window.localStorage.setItem("everFocusedInput","true"),eh(!0)):null===(t=eo.current)||void 0===t||t.blur()},[ec]);var eb=A?"One AI Support, how can I help?":ec&&em?"":E?void 0:(null==ex?void 0:ex.input_placeholder)?(0,_.x1)(H,K,null==ex?void 0:ex.input_placeholder):eg?"":U?(0,_.x1)(H,K,void 0,void 0,void 0,V):"",ey=h&&!em&&"bottom"===e_.widget_type;return(0,c.jsxs)("div",{style:{width:u||"100%"},className:"lg:max-w-[980px] ".concat(er?"hidden":"","  ").concat(E?"":x&&!y?"max-lg:dark:!bg-[#272535] max-lg:bg-[#FFF]":A?"max-lg:dark:!bg-[#272535] max-lg:bg-[#FFF]":ey?"px-[3.5px] !bg-[transparent]":"max-lg:dark:!bg-[#302F43] max-lg:bg-[#FFF] "," w-full ").concat(E?"pt-4":"mx-auto"),children:[(0,c.jsx)(T,{inputRef:eo,isIndependant:E,insertMode:eg}),(0,c.jsxs)("form",{className:"bg-white flex flex-row items-stretch ".concat(h||eE?"":"pb-2.5"," ").concat(ey?"rounded-[5px]":"","  ").concat(ey?"":"pt-2"," mx-auto  ").concat(h?ey?"":" ".concat(E?"!bg-[transparent]":x&&!y?"dark:!bg-[#272535] max-lg:bg-[#FFF] lg:p-2 max-lg:mx-2":A?"dark:!bg-[#272535] max-lg:bg-[#FFF] lg:p-2 max-lg:mx-2 ":"dark:!bg-[#302F43] max-lg:bg-[#FFF] lg:p-2 max-lg:mx-2 "," ").concat(eA&&!eE?"pb-2":""):"  ".concat(A?"dark:bg-[#272535]  lg:px-[30px] lg:pt-2.5 max-lg:mx-2":E?"!bg-[transparent]":"dark:bg-[#302F43]  lg:px-[30px] lg:pt-2.5 max-lg:mx-2"),"  "),onSubmit:ev,autoComplete:"off",children:[E?null:(0,c.jsx)(I,{inputText:D,setInputText:k}),(0,c.jsxs)("div",{className:"relative w-full  ".concat(E?"max-h-[45px]":"max-h-[50px]"),children:[(0,c.jsx)(S,{insertMode:eg}),(0,c.jsx)("label",{htmlFor:"insertURLOrText",className:"sr-only",children:eg?"Insert URL":"Your message"}),(0,c.jsx)(eC,{onFocus:function(){eu(!0)},onBlur:function(){eu(!1)},ref:eo,placeholder:eb,autoComplete:null===(t=(0,_.KC)(null==ex?void 0:ex.input_autocomplete,E))||void 0===t?void 0:t.autoComplete,name:null===(n=(0,_.KC)(null==ex?void 0:ex.input_autocomplete,E))||void 0===n?void 0:n.name,type:E?"text":(null==ex?void 0:ex.input_type)||"text","data-cy":"query_textfield_in_agent",id:E?"insertURLOrTextInMessage":"insertURLOrText",className:"w-full  ".concat(ey?"!bg-white dark:!bg-[#393849]":""," placeholder:animate-fade-in placeholder:duration-[600ms] placeholder:transition-opacity ").concat(D?"":"overflow-y-hidden"," ").concat("textarea"===eC?"placeholder:!leading-[25px]":"placeholder:!leading-2"," dark:text-white ").concat(j===D&&E?"!text-[#918D9A] ":""," placeholder:text-[13px] overflow-y-auto block ").concat(D?" whitespace-normal":"!text-ellipsis placeholder:text-ellipsis !whitespace-nowrap"," placeholder:xs:text-sm text-black outline-none ").concat(E?"max-h-[45px] py-[10px] dark:bg-[#252533] max-lg:bg-[#EFEFEF] grid justify-self-start":"max-h-[50px] py-[13px]  ".concat(x||A?"dark:bg-[#393849]":"dark:bg-[#1D1C29]"," max-lg:bg-[#EFEFEF]")," !rounded-r-none !rounded-l-[5px] placeholder:!text-[#918D9A] ").concat(w?"":"!rounded-[5px] !rounded-r-none"," resize-none bg-white ").concat(eg?"pl-[70px] pr-4":" px-4"," shadow-none border-none "),onChange:function(e){k(e.target.value)},value:D,onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ev(e))}}),(0,c.jsx)(v.Z,{everFocused:ef})]}),(0,c.jsx)(m.Z,{insertMode:eg,isIndependant:E,inputText:D,placeholder:eb,isWidget:h,lastInsertedUrl:j,widget:q})]})]})},I=function(e){var t=e.inputText,n=e.setInputText,i=(0,g.x)().canAddData,r=(0,l.useEventLogger)().eventLogger,a=(0,b.useRef)(null),o=(0,d.a)(),s=o.methods.setInsertMode,p=o.insertMode;return i?(0,c.jsx)("button",{type:"button",onClick:function(){p||((0,_.s2)()?r(h.V1.PLUS_BUTTON_TAP):r(h.V1.PLUS_BUTTON_CLICKED)),t&&p&&n(""),s(!p)},className:"!rounded-[5px] active:dark:text-background hover:dark:text-opacity-50 grid place-items-center overflow-hidden text-white dark:text-white cursor-pointer p-0 w-[50px] mr-[8px] min-w-[50px]  dark:bg-[#1D1C29] bg-[#918D9A]",onMouseEnter:function(){p||(a.current=window.setTimeout(function(){r(h.V1.PLUS_BUTTON_HOVER)},500))},onMouseLeave:function(){a.current&&window.clearTimeout(a.current)},"aria-label":p?"Close Add URL or File":"Add URL or File",children:(0,c.jsx)(u.Z,{width:20,height:20,className:"transform duration-200 ".concat(p?"-rotate-45":"rotate-0")})}):null},S=function(e){var t=e.insertMode;return(0,c.jsx)("span",{className:"absolute left-4 transition-all text-lightText top-1/2 transform -translate-y-1/2 ".concat(t?"":"hidden"),children:"https://"})},T=function(e){var t,n=e.isIndependant,u=e.insertMode,g=e.inputRef,h=(0,p.mi)().addAgentFile,v=(0,d.a)(),m=v.isAgentMaker,_=v.isWidget,A=v.userInfo,C=v.methods,w=C.setTouchedAgentMakerBox,I=C.setInsertMode,S=(0,l.useEventLogger)().eventLogger,T=(0,o._)((0,b.useState)(void 0),2),N=T[0],D=T[1];(0,b.useEffect)(function(){N&&!m&&(S(N.eventName,(0,a._)((0,r._)({},N.data),{total_loading_time:(new Date().getTime()-new Date(N.data.start_time).getTime())/1e3})),D(void 0))},[N,m]);var k=(t=(0,i._)(function(e){var t,n;return(0,s.Jh)(this,function(i){switch(i.label){case 0:t=(0,f.FP)(e.type)||"",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,h({file:e,contentType:t,fileName:e.name,type:"choose"})];case 2:return i.sent(),I(!1),[3,4];case 3:return n=i.sent(),S(E.uE.DOCUMENT_FAIL),console.error("Error adding file:",n),[3,4];case 4:return[2]}})}),function(e){return t.apply(this,arguments)});return u?(0,c.jsxs)("div",{className:" ".concat(A.acceptedTerms?"":n?"grid grid-rows-auto-1fr gap-y-2":null),children:[A.acceptedTerms||!n?null:(0,c.jsxs)("span",{className:"text-lightText",children:["By using the Maker you hereby agree to the"," ",(0,c.jsx)(x(),{href:"https://oneai.com/tos",className:"underline !text-lightText pb-4",target:"_blank",children:"terms and conditions"})]}),(0,c.jsxs)("div",{role:"button",onClick:function(){var e;n?w(!0):w(!1),null==g||null===(e=g.current)||void 0===e||e.focus()},className:n?"text-cyan pb-2":"px-4 lg:pl-[30px] pt-2 bg-[#EFEFEF] ".concat(_?"dark:bg-backgroundOverlay ":" dark:bg-[#302F43] "," lg:bg-white max-lg:pb-1 text-cyan"),children:["Enter your website URL"," ",(0,c.jsxs)(y,{onChange:k,children:["(or ",(0,c.jsx)("span",{className:"underline text-[#BABABA]",children:"upload a file"}),")"]})]})]}):null}},5921:function(e,t,n){n.d(t,{z:function(){return U}});var i=n(5893),r=n(2253),a=n(4932),o=n(248),s=n(7702),c=n(4043),u=n(1956),l=n(4644),d=n(1248),g=n(430),p=n(7492),f=n(3293),h=n(1016),v=n(5152),m=n.n(v),_=n(7294),E=n(8262),A=n(362),x=n(1253),C=n(1443),b=m()(function(){return n.e(5935).then(n.bind(n,5935)).then(function(e){return e.SystemMessageActions})},{ssr:!1}),y=m()(function(){return Promise.all([n.e(7441),n.e(7629)]).then(n.bind(n,7629)).then(function(e){return e.MarkdownRenderer})},{loadableGenerated:{webpack:function(){return[7629]}}}),w=(0,h.m)((0,_.forwardRef)(function(e,t){var n,o=e.message,v=e.label,m=e.showAction,w=e.messageIdx,I=e.isWidgetBottomDesktop,S=e.chatHistory,T=e.isWidget,N=e.highlightedItem,D=e.setHighlightedItem,k=e.setChatHistory,O=e.publicName,L=e.isOnline,R=e.primaryColor,j=e.navigateToAgentMaker,P=(0,s._)(e,["message","label","showAction","messageIdx","isWidgetBottomDesktop","chatHistory","isWidget","highlightedItem","setHighlightedItem","setChatHistory","publicName","isOnline","primaryColor","navigateToAgentMaker"]),M=(0,_.useRef)(null),G=(0,c._)((0,_.useState)(250),2),U=G[0],F=G[1],B=(0,c._)((0,_.useState)(!1),2),K=B[0],H=B[1],W=(0,c._)((0,_.useState)(0),2),V=W[0],Y=W[1],J=(0,c._)((0,_.useState)(0),2),Z=J[0],q=J[1],z=(0,E.useEventLogger)().eventLogger,Q=(0,A.a)(),X=Q.isParamsReady,$=Q.agentInfo.displayName,ee=(0,g.k)(o,S,w,O,k,X,function(){o.is_welcome_message&&o.speaker===$&&z(f.uE.MESSAGE_SHOWN_WELCOME_MESSAGE,{message:o.original_utterance})}).displayMessage,et=(0,d._)({value:o,active:(null==S?void 0:S.length)>1}),en=(0,_.useMemo)(function(){return o.utterance?(0,p.nz)(o,N,O):"<p></p>"},[o,N,O]);return((0,_.useEffect)(function(){q(window.innerWidth),M.current&&F(M.current.offsetWidth);var e=function(){M.current&&(F(M.current.offsetWidth),q(window.innerWidth))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[o.finished,o.utterance]),o.is_animated&&(null==S?void 0:null===(n=S[w-1])||void 0===n?void 0:n.finished)===!1)?null:(0,i.jsxs)("div",(0,a._)((0,r._)({},P),{ref:(0,u.l)(t,et),onMouseLeave:function(){D(void 0)},className:"mr-5 self-stretch ".concat(v?"mt-5":""," "),children:[(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsxs)(h.m.div,{className:"bg-white ".concat(I?"".concat((null==o?void 0:o.is_history)||(null==o?void 0:o.is_welcome_message)||(null==o?void 0:o.error)||!(null==o?void 0:o.finished)||!1===o.fact_check_enabled?"rounded-[5px]":"rounded-t-[5px]"):"","  base-message shadow-sm dark:text-white text-black p-3 $ ").concat(v?"pt-6":"pt-3"," ").concat(o.finished?"!min-w-[245px] md:!min-w-[270px]":"","  ").concat(T?"dark:!bg-[#393848]":"dark:!bg-lightBackground "),ref:M,style:{minWidth:o.utterance&&m?250:Z<V+40?Z-40:V+40},children:[v?(0,i.jsx)(l.Z,{isWidget:T,primaryColor:R,setLabelWidth:Y,speaker:o.speaker,children:v}):null,o.error?L?"Sorry, an error has occurred, please try again":"Cannot send query, please check your network connection":o.utterance||o.original_utterance?(0,i.jsxs)("div",{className:"grid grid-rows-auto-1fr min-w-0",children:[(0,i.jsx)(y,{publicName:O,navigateToAgentMaker:j,setHighlightedItem:D,expanded:K,text:(0,p.gw)(o.is_animated?ee:o.utterance,O),isFinished:!0===o.finished||w!==S.length-1}),o.finished&&"chat-input"===o.component?(0,i.jsx)(C.x,{isIndependant:!0}):null]}):(0,i.jsxs)("div",{className:"grid grid-rows-auto-1fr min-w-0",children:[(0,i.jsx)(y,{navigateToAgentMaker:j,setHighlightedItem:D,publicName:O,expanded:K,text:en,isFinished:!0===o.finished||w!==S.length-1}),o.finished&&"chat-input"===o.component?(0,i.jsx)(C.x,{isIndependant:!0}):null]})]}),(0,i.jsx)("div",{className:"min-w-0",style:{width:U/2},children:"action-buttons"===o.component?(0,i.jsx)(x.Z,{}):null})]}),!o.error&&o.utterance&&m?(0,i.jsx)(b,{width:U,expanded:K,setExpanded:H,message:o,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:1,y:10}},"message"):null]}))})),I=n(8129),S=n(4862),T=n(1526),N=n(1163),D=n(1851),k=n(2060),O=n(3933),L=(0,h.m)((0,_.forwardRef)(function(e,t){var n=e.isWidgetBottomDesktop,r=(0,A.a)(),a=r.refs,o=r.isWidget,s=r.agentInfo,u=s.sampleQuestions,l=s.chatId,d=r.hints,g=r.totalMessages,p=r.methods,v=p.setShowQuestions,m=p.setPreventOverflow,x=(0,k.MI)().queryAgent,C=(0,c._)((0,_.useState)(1),2),b=C[0],y=C[1],w=(0,E.useEventLogger)().eventLogger,I=(0,c._)((0,_.useState)(u.length?u:[]),2),N=I[0],D=I[1],L=null;(0,_.useEffect)(function(){var e=(b-1)*4,t=4*b,n=(null==u?void 0:u.slice(e,t))||[];u.length>t&&n.push("ADD_QUESTIONS_UNIQUE_ID"),n.toString()!==N.toString()&&D(n)},[b,u]);var R=(0,_.useRef)(null),j=function(){y(function(e){return e+1}),v(!0)},P=(0,_.useRef)(null),M=(0,_.useRef)(null),G=function(e){var t=e.touches?e.touches[0]:e;M.current=t.clientY,document.addEventListener("mousemove",U),document.addEventListener("touchmove",U,{passive:!1}),document.addEventListener("mouseup",F),document.addEventListener("touchend",F)},U=function(e){var t=(e.touches?e.touches[0]:e).clientY-((null==M?void 0:M.current)||0);e.cancelable&&e.preventDefault(),L&&clearTimeout(L),t<0&&(L=setTimeout(function(){j()},300)),e.preventDefault()},F=function(){document.removeEventListener("mousemove",U),document.removeEventListener("touchmove",U),document.removeEventListener("mouseup",F),document.removeEventListener("touchend",F)};(0,_.useEffect)(function(){var e,t;null==P||null===(e=P.current)||void 0===e||e.addEventListener("touchstart",G),null==P||null===(t=P.current)||void 0===t||t.addEventListener("mousedown",G)},[]);var B=g>0&&d.length>0,K=1===b?d.concat(B?[]:N).slice(0,4).concat(B?[]:["ADD_QUESTIONS_UNIQUE_ID"]):N.slice(0,4).concat(["ADD_QUESTIONS_UNIQUE_ID"]);return(0,i.jsx)(h.m.ul,{"data-cy":"generated_questions_list",onTouchStart:G,onMouseDown:G,className:"".concat(n?"":void 0," grid  max-w-full self-end origin-bottom m-0 gap-[10px] grid-flow-row overflow-hidden lg:mt-[14px]"),children:(0,i.jsx)(T.M,{"data-cy":"text_class_in_all_questions-buttons",mode:"popLayout",children:(null==K?void 0:K.length)&&K.filter(function(e,t){return t<5}).map(function(e,t){return(0,i.jsx)(h.m.li,{"data-cy":"single_generated_questions_id_".concat(t,"_").concat(b),initial:{opacity:0,y:340},animate:{opacity:1,y:0},exit:{opacity:0,y:-350},onAnimationStart:function(){m(!0)},onAnimationComplete:function(){m(!1)},transition:{opacity:{duration:1},y:{duration:.5},delay:1},className:" ".concat("ADD_QUESTIONS_UNIQUE_ID"===e?"h-[16px]":""," "),children:"ADD_QUESTIONS_UNIQUE_ID"===e?(0,i.jsx)(O.T,{onClick:j,source:"agent",questionText:"",className:"!h-[16px]",isWidget:o},(null==N?void 0:N.length)-1):(0,i.jsx)(O.T,{source:"agent",isWidget:o,onClick:function(){var t,n;if(R.current){var i,r=null===(i=getComputedStyle(R.current).height)||void 0===i?void 0:i.split("px")[0];R.current.style.height="".concat(Number(r)-50,"px")}l&&"N/A"!==l?w(f.uE.SUGGESTED_QUERY_MADE,{query:e,message:e,click_location:"agent_page"}):(0,S.h$)({eventName:f.uE.SUGGESTED_QUERY_MADE,payload:{query:e,message:e,click_location:"agent_page"}}),D([e]),v(!1),x(e,w,!0,{click_location:"agent_page"}),null==a||null===(n=a.input)||void 0===n||null===(t=n.current)||void 0===t||t.focus()},questionText:e},t)},"".concat(t,"_").concat(b))})})})})),R={initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:1,y:10}},j=function(e){var t,n,s,c=e.isWidget,u=(0,A.a)(),l=u.hints,d=u.insertMode,g=u.showActionButtons,p=u.highlightedItem,f=u.isOnline,v=u.agentInfo,m=v.sampleQuestions,E=v.publicName,x=v.configuration,C=x.showCreateAgentLink,b=x.showOneAiBranding,y=u.showQuestions,k=u.isParamsReady,O=u.chatHistory,j=u.methods,P=j.setChatScrollState,M=j.setChatHistory,G=j.setHighlightedItem,U=(0,D.useProgress)().isShowingProgressBar,F=(0,N.useRouter)().query,B=1===O.length&&!!m.length&&(null===(t=O[(null==O?void 0:O.length)-1])||void 0===t?void 0:t.is_animated)!==!0||!!m.length&&(null===(n=O[(null==O?void 0:O.length)-1])||void 0===n?void 0:n.is_animated)===!0&&(null==O?void 0:O.every(function(e){return e.speaker}))||(null==l?void 0:l.length)>0,K=!1;(m.length>0&&(null===(s=O[(null==O?void 0:O.length)-1])||void 0===s?void 0:s.speaker)===S.kW||y)&&(K=!0);var H=(0,_.useMemo)(function(){return k?B?(0,o._)(O).concat([{speaker:"questions",id:Math.random(),finished:!1,utterance:""}]):(0,o._)(O).concat((0,o._)(K?[{speaker:"questions",id:Math.random(),finished:!1,utterance:""}]:[])):[]},[O,B,K,M,k]),W=(0,_.useRef)(null);(0,_.useEffect)(function(){if(W.current)return window.addEventListener("resize",function(){var e;null===(e=W.current)||void 0===e||e.scrollTo({top:W.current.scrollHeight})}),function(){window.removeEventListener("resize",function(){var e;null===(e=W.current)||void 0===e||e.scrollTo({top:W.current.scrollHeight})})}},[]);var V=b||C,Y=O.filter(function(e){return!e.is_welcome_message&&!e.is_history});return(0,i.jsx)(h.m.div,{id:"".concat(c?"":"chat-content"),className:"".concat(d?U?g?"min-h-[calc(100dvh-354px)] lg:min-h-[calc(100dvh-345px)] ab13":"min-h-[calc(100dvh-320px)] lg:min-h-[calc(100dvh-362px)] ab14":"min-h-[calc(100dvh-280px)] lg:min-h-[calc(100dvh-295px)] ab15":U?g?"min-h-[calc(100dvh-318px)] lg:min-h-[calc(100dvh-334px)] ab16":"min-h-[calc(100dvh-285px)] lg:min-h-[calc(100dvh-330px)] ab17 ":V?"min-h-[calc(100dvh-244px)] lg:min-h-[calc(100dvh-263px)] ab999":"min-h-[calc(100dvh-208px)] lg:min-h-[calc(100dvh-220px)] ab18"," max-lg:!px-2 max-lg:!pt-10  w-full h-full flex lg:px-[30px] lg:-mb-6 -mb-6 lg:pt-[26px] overflow-x-hidden overflow-y-hidden flex-col gap-[25px] [&_ul:last-child]:mt-auto flex-shrink-0  flex-[1]"),ref:W,onScroll:function(e){e.currentTarget&&!(window.innerWidth>1200)&&(e.currentTarget.scrollTop>180?P("MIDDLE"):P("TOP"))},children:(0,i.jsx)(T.M,{mode:"sync",children:H.filter(function(e){return null==e?void 0:e.speaker}).map(function(e,t){var n=!t,o=t.toString();return"user"===e.speaker?(0,i.jsx)(I.X,(0,a._)((0,r._)({layout:"position",isWidgetBottomDesktop:!1},R),{message:e,shouldScroll:null==Y?void 0:Y.length}),o+t):"questions"===e.speaker?(0,i.jsx)(h.m.ul,{className:"self-end origin-bottom m-0 grid",children:(0,i.jsx)(L,{layout:"position",isWidgetBottomDesktop:!1})},o+t):(0,i.jsx)(w,(0,r._)({chatHistory:O,setChatHistory:M,highlightedItem:p,setHighlightedItem:G,layout:"position",messageIdx:t,isOnline:f,publicName:E,isWidgetBottomDesktop:!1,message:e,label:"agentmaker"===e.speaker?"~AgentMaker":t&&((null==e?void 0:e.speaker)==="agent"||(null==e?void 0:e.speaker)===S.kW)?null:"pending"===e.speaker?"~":"~".concat(e.speaker),showAction:!n&&"agent"===e.speaker},n||F.userId?{}:R),o+t)})})})},P=n(3918),M=m()(function(){return Promise.resolve().then(n.bind(n,1851))},{loadableGenerated:{webpack:function(){return[1851]}}}),G=m()(function(){return Promise.resolve().then(n.bind(n,5e3)).then(function(e){return e.DropContextProvider})},{loadableGenerated:{webpack:function(){return[5e3]}}}),U=function(e){var t,n,r,a=e.isWidget,o=void 0!==a&&a,s=e.isSupportAgent,c=(e.justChat,e.isBottomDesktop),u=(0,N.useRouter)().query,l=null==u?void 0:null===(t=u.slug)||void 0===t?void 0:t[0],d=null==u?void 0:null===(n=u.slug)||void 0===n?void 0:n[1],g=null==u?void 0:null===(r=u.quickMessage)||void 0===r?void 0:r.toString(),p=(0,N.useRouter)(),f=(0,E.useEventLogger)().eventLogger,h=(0,A.a)(),v=h.isAgentMaker,m=h.message,x=h.methods.setMessage,C=h.agentInfo.publicName,b=(0,k.MI)().queryAgent;return(0,_.useEffect)(function(){"share"===l&&f(P.V1.SHARED_CONVERSATION_OPENED,{share_id:d})},[l,C]),(0,_.useEffect)(function(){(null==u?void 0:u.share)&&f(P.V1.SHARED_AGENT_OPENED)},[null==u?void 0:u.share]),(0,_.useEffect)(function(){(null==u?void 0:u.share)&&f(P.V1.SHARED_AGENT_OPENED)},[null==u?void 0:u.share]),(0,_.useEffect)(function(){m&&(b(m,f),setTimeout(function(){x("")},100))},[m]),(0,_.useEffect)(function(){g&&!v&&(setTimeout(function(){b(g,f)},1e3),setTimeout(function(){p.replace(window.location.pathname,void 0,{shallow:!0})},1e3))},[g]),(0,i.jsxs)(i.Fragment,{children:[o?null:(0,i.jsx)(G,{}),(0,i.jsx)(F,{isBottomDesktop:void 0!==c&&c,isWidget:o,isSupportAgent:void 0!==s&&s})]})},F=function(e){var t=e.isWidget,n=e.isSupportAgent,r=e.isBottomDesktop;return(0,i.jsxs)("div",{className:"".concat(n?"!bg-backgroundOverlayLight dark:!bg-[#272535]":t?r?"":"bg-backgroundOverlayLight dark:!bg-background":"lg:!bg-backgroundOverlay "," lg:max-w-[980px] lg:m-auto !w-full rounded-b-[5px] relative"),children:[(0,i.jsx)(M,{}),(0,i.jsx)(j,{isWidget:t})]})}},3688:function(e,t,n){n.d(t,{f:function(){return Z}});var i=n(2253),r=n(4932),a=n(4043),o=n(5893),s=n(2383),c=n(5513),u=n(7990),l=n(1934),d=n(4468),g=n(8739),p=n(38),f=n(9331),h=n(2986),v=n(2932),m=n(6931),_=n(5892),E=n(3244),A=n(6838),x=n(848),C=n(5581),b=n(8026),y=n(2496),w=n(9844),I=n(5351),S=n(4862),T=n(3293),N=n(8208),D=n(1526),k=n(1016),O=n(5152),L=n.n(O),R=n(5347),j=n(7294),P=n(5518),M=n(4689),G=n(1443),U=n(5921),F=n(1719),B=n(6550),K=n(8262),H=n(3197),W=n(362),V=L()(function(){return Promise.all([n.e(7441),n.e(7629)]).then(n.bind(n,7629)).then(function(e){return e.MarkdownRenderer})},{loadableGenerated:{webpack:function(){return[7629]}}}),Y=function(e){var t,n=e.widget,i=e.isChatActive,r=e.isStudioPreview,a=(null==n?void 0:null===(t=n.desktop)||void 0===t?void 0:t.widget_type)==="bottom"&&!P.isMobile;return(0,o.jsx)("div",{className:"grid w-full justify-self-center grid-cols-1 ".concat(a&&i?"py-1":""," ").concat(a?"":r?"dark:bg-[#272535] py-1":"dark:bg-[#302F43]","  "),children:(0,o.jsx)("figure",{className:"grid justify-self-center ".concat(r?"":" pt-1"),style:{color:r?"#5B5887":"rgb(".concat(n.primary_color,")")},children:i&&!r?(0,o.jsx)(v.Z,{className:a?"opacity-50":r?"w-[30px] rounded-md":void 0}):a?(0,o.jsx)(h.Z,{}):(0,o.jsx)(m.Z,{className:r?"w-[30px] rounded-md":void 0})})})},J=function(e){var t,n=e.isChatActive,i=e.widget,r=e.onClick,s=e.isStudioPreview,c=e.suggestedIdx,d=e.onClickSend,g=(0,y.$h)().theme,p=(0,W.a)().agentInfo,f=p.publicName,h=p.displayName,v=p.sampleQuestions,m=p.teaserText,_=(0,a._)((0,j.useState)(!1),2),E=_[0],x=_[1],C=(0,a._)((0,j.useState)(),2),b=C[0],I=C[1],T=v[c],N=(0,a._)((0,j.useState)(!0),2),D=N[0],k=N[1];(0,j.useEffect)(function(){k("true"===window.localStorage.getItem("everFocusedInput"))},[]),(0,j.useEffect)(function(){-1!==c&&(x(!0),setTimeout(function(){I(T)},w.Av),setTimeout(function(){x(!1)},w.Av+w.HL))},[c]);var O=(null==i?void 0:null===(t=i.desktop)||void 0===t?void 0:t.widget_type)==="bottom"&&!P.isMobile,L=-1===c&&""!==m||0===c&&E;return(0,o.jsxs)("div",{className:"justify-center w-full text-center cursor-pointer  ".concat(n?"":O?"grid grid-cols-1 gap-y-[4px]":"border-t border-t-[#3D3C56] border-opacity-30 dark:border-opacity-100 dark:border-t-[#3D3C56]"),children:[(0,o.jsx)(Y,{widget:i,isChatActive:n,isStudioPreview:s}),(0,o.jsxs)("div",{className:"   !w-full items-center ".concat(O?"px-[3.5px] pb-2 min-w-full grid grid-cols-1":s?"dark:bg-[#272535] px-2 bg-[#EFEFEF] grid":"grid-cols-auto-1fr dark:bg-[#302F43] px-2 bg-[#EFEFEF] grid"),children:[s||!P.isMobile?null:(0,o.jsx)("div",{role:"button",onClick:r,className:"grid px-2 bg-white dark:bg-[#1D1C29] h-[50px] items-center rounded-l-[5px] ".concat(n?"grid-cols-auto-1fr ":""," gap-x-2 left-0 transition-all duration-300 w-full relative"),children:"light"===g?(0,o.jsx)(u.Z,{className:"text-white"}):(0,o.jsx)(l.Z,{className:"text-white"})}),(0,o.jsxs)("div",{className:"grid grid-cols-1fr-auto items-center gap-x-0 min-w-0 w-full  !z-[9999999999] ".concat(s?"h-[50px] ":O?"h-[50px]":"h-[60px] "),children:[(0,o.jsx)("div",{className:"py-2 bg-white  !h-[50px] w-full grid items-center min-w-0 ".concat(s||O?"rounded-l-[5px] pl-2 dark:bg-[#393849]":"dark:bg-[#1D1C29]"),children:(0,o.jsxs)("p",{className:"!text-[#918D9A] relative pl-1 pr-4 truncate text-sm text-ellipsis text-start transition-opacity duration-[600ms] ".concat(E?"opacity-0":"opacity-100"),children:[(0,o.jsx)("span",{className:"px-1 absolute top-1/2 transform text-black dark:text-white -translate-y-1/2 animate-blink md:!hidden ".concat(D?"!hidden":""),children:"|"}),(0,o.jsxs)("span",{className:D?"":"pl-2",children:[L?"":"âœ¨ ",(0,S.x1)(h,f,b,void 0,!0,m)]})]})}),(0,o.jsx)("div",{role:"button",style:{backgroundColor:"rgb(".concat(i.primary_color,")")},onClick:d,className:"bg-[#504D60] hover:bg-opacity-80 grid place-items-center items-center w-[50px] !rounded-br-[1px] max-md:!rounded-r-[5px] !h-[50px]",children:(0,o.jsx)(A.Z,{className:"text-white"})})]})]})]})},Z=function(e){var t=e.overrides,n=e.widget,r=(0,S.s2)(),a=(0,W.a)().agentInfo.agentId,o=(0,w.Cc)({widget:n,overrides:t}),s=r?o.mobile:o.desktop,c=(0,F.Z)({agentId:a}).getWidgetState;(null==t?void 0:t.justChat)&&(s.widget_type="side");var u="bubble"===s.widget_type,l="left"===s.location||"bottom"!==s.widget_type&&"middle"===s.location,d="bottom"===s.widget_type,g="bottom"===s.widget_type&&!r,p=(null==s?void 0:s.widget_type)==="side",f=(null==t?void 0:t.justChat)===!0,h=c(),v="opened"===h.state||(null==o?void 0:o.auto_open_in_load)===!0&&("closed"!==h.state||(0,N.N)(h.timestamp))&&!r,m=(0,i._)({},T.iP,o.bottom_widget);return{activeDeviceConfig:s,isMobile:r,isBubble:u,isBottom:d,isBottomDesktop:g,widgetIsLeft:l,widgetIsSide:p,isAutoOpen:v,widget:o,justChat:f,desktopBottomWidgetConfig:m}},q=function(e){var t=e.widget,n=e.isChatActive,i=e.isWidgetHovered,r=e.onClick,u=e.overrides,l=(0,a._)((0,j.useState)(!1),2),d=l[0],h=l[1],v=Z({overrides:u,widget:t}),m=v.isMobile,_=v.isBubble,E=v.isBottom,A=v.widgetIsLeft,C=v.justChat,b=(0,K.useEventLogger)().eventLogger,y=(0,j.useRef)(void 0),w=t.theme,I=function(){h(!1),y.current&&window.clearTimeout(y.current)},S=function(){n||(y.current=window.setTimeout(function(){b(T.uE.EMBEDDED_AGENT_HOVERED)},300))};return(0,o.jsx)(o.Fragment,{children:C?(0,o.jsx)(o.Fragment,{}):_?(0,o.jsxs)("button",{onMouseEnter:S,onMouseOver:function(){h(!0)},onMouseLeave:I,onClick:r,className:"absolute bottom-0 ".concat(_&&!m?"z-[99999]":""," ").concat(m&&n?"hidden":""," ").concat(A?"left-0":"right-0"," transition-all duration-300"),children:[n?(0,o.jsx)(c.Z,{className:"".concat("light"===w?"text-black":"text-white"," absolute origin-center ").concat(m||E?"":"z-10","  top-[7px] left-[12px] transition-rotate transform duration-300 ").concat(m?"":d?"rotate-90":"")}):(0,o.jsx)(x.Z,{className:"text-white absolute origin-center z-10 top-[18px] left-[16px] transition-rotate transform duration-300 ".concat(m?"":i?"rotate-90":"")}),n?"dark"===w?(0,o.jsx)(g.Z,{style:{transition:"color 0.3s ease",color:n?"rgb(29, 28, 41)":(null==t?void 0:t.primary_color)?"rgb(".concat(t.primary_color,")"):"rgb(29, 28, 41)"}}):(0,o.jsx)(p.Z,{className:"w-[60px] h-[60px]",style:{transition:"color 0.3s ease",color:n?"light"===w?"rgb(239, 239, 239)":"rgb(29, 28, 41)":(null==t?void 0:t.primary_color)?"rgb(".concat(t.primary_color,")"):"light"===w?"rgb(239, 239, 239)":"rgb(29, 28, 41)"}}):(0,o.jsx)(f.Z,{style:{transition:"color 0.3s ease",color:n?"light"===w?"rgb(239, 239, 239)":"rgb(29, 28, 41)":(null==t?void 0:t.primary_color)?"rgb(".concat(t.primary_color,")"):"light"===w?"rgb(239, 239, 239)":"rgb(29, 28, 41)"},className:"w-[56px] "})]}):E?null:(0,o.jsxs)("div",{className:"grid justify-items-end ".concat(E?"hidden":""," ").concat(A?"justify-self-start":"justify-self-end"," ").concat(n?"w-[36px]":"w-[80px]"," h-full transition-all transform duration-300 ").concat(n?"":i?A?"translate-x-2":"-translate-x-2":"translate-x-0"),children:[(0,o.jsx)("button",{onClick:r,style:{backgroundColor:"rgb(".concat(t.primary_color,")")},onMouseEnter:S,onMouseLeave:I,className:"relative h-full  ".concat(n?"w-[8px]":"w-[64px]"," ").concat(A?"justify-self-start":"justify-self-end"),children:(0,o.jsx)(ei,{isChatActive:n,isWidgetHovered:i})}),(0,o.jsx)("button",{style:{backgroundColor:"rgb(".concat(t.primary_color,")")},onClick:r,className:"absolute top-6 ".concat(A?"right-0":"left-0"," w-8 h-8 rounded-full bg-white dark:bg-darkBackground grid place-items-center"),children:(0,o.jsx)(s.Z,{className:"text-black dark:text-white  ".concat(n?A?"":"rotate-180":A?"rotate-180":"")})})]})})};function z(e){var t=e.avatar,n=e.dimensions,i=void 0===n?"":n,r=e.containerClassName;return(0,o.jsx)("div",{className:"relative clip-48 grid items-center h-[48px] w-[48px] ".concat(void 0===r?"":r," ").concat(i," "),children:""===t?(0,o.jsx)("div",{className:"!h-[52px] !w-[48px] grid items-center place-items-center -mt-2 ".concat(i),children:(0,o.jsx)(x.Z,{})}):(0,o.jsx)("img",{"data-cy":"avatar_image",className:"object-cover h-full w-full !bg-white",src:t||"/~images/avatar-light.png",alt:"Agent avatar",onError:function(e){e.target.onError=null,e.target.src="/~images/avatar-light.png"}})})}var Q=function(e){var t=e.children,n=e.setIsWidgetHovered,i=e.widget,r=e.overrides;e.isChatActive;var a=Z({widget:i,overrides:r}),s=a.isBottom,c=a.isBubble,u=a.isBottomDesktop,l=a.desktopBottomWidgetConfig,d=(0,w.JP)(l),g=function(e){n(e)};return(0,o.jsx)("div",{onMouseLeave:function(){g(!1)},style:{backgroundColor:u?d:void 0},onMouseOver:function(){g(!0)},className:"h-full relative ".concat(u?"backdrop-blur-[7px]":"","  ").concat(u?"!rounded-[5px]":" !bg-[transparent]"," w-full ").concat(s||c?"":P.isMobile?"":"min-w-[318px]"," overflow-hidden ").concat(P.isMobile?"":c?"px-1":""),children:t})},X=function(e){var t=e.setParent,n=e.expanded,a=e.setExpanded,o=e.widget,s=e.setOverrides,c=e.getWidgetState,u=e.setWidgetParentTitle,l=e.setToggleCloseWidet,d=e.openWidget,g=e._resetChat,p=o.theme,f=(0,R.y1)({methods:{populateOverrides:function(e){(null==e?void 0:e.title)&&u(e.title),s(function(t){return(0,r._)((0,i._)({},t),{overrides:e})}),f.promise.then(function(n){return(null==e?void 0:e.theme)&&(p=e.theme),t(n),n.setAgentConfiguration(er(o,c,e)),p})},setAgentConfiguration:function(){},openWidget:function(e){d(e)},closeWidget:function(){l(function(e){return e+1})},toggleChatActive:function(){(0,j.startTransition)(function(){a(!n)})},resetChat:function(){g()}}});return p},$=function(e){var t,n=e.isChatActive,s=e.closeWidget,c=e.widget,u=e.openWidget,l=e.overrides,d=Z({widget:c,overrides:l}),g=d.isMobile,p=d.isBubble,f=d.widgetIsLeft,h=d.widgetIsSide,v=d.justChat,m=(0,a._)((0,j.useState)(!1),2),_=m[0],E=m[1],A=(0,a._)((0,j.useState)(-1),2),x=A[0],C=A[1],b=(0,a._)((0,j.useState)(-1),2),y=b[0],I=b[1],S=(0,a._)((0,j.useState)(!1),2),T=S[0],N=S[1],O=(0,W.a)().agentInfo,L=O.sampleQuestions,R=O.cycleSuggestedQuestions;(0,j.useEffect)(function(){(n||v)&&E(!0)},[n,v]);var P=p?{initial:{scaleY:0,opacity:0,originY:1},animate:{scaleY:1,opacity:1,originY:1},exit:{scaleY:0,opacity:0,originY:1},transition:{duration:.3}}:void 0;(0,j.useEffect)(function(){if((null==L?void 0:L.length)&&R&&!v){var e=setInterval(function(){C(function(e){return 10===e||e===L.length-1?0:e+1})},w.Ts);return function(){return clearInterval(e)}}},[L,R,v]),(0,j.useEffect)(function(){n||(x>=10?C(0):I(x))},[x,n,L]);var M=function(){-1!==y&&(N(!0),setTimeout(function(){N(!1)},100))},G=(null==c?void 0:null===(t=c.desktop)||void 0===t?void 0:t.widget_type)==="bottom"&&!g;return(0,o.jsx)(D.M,{children:g?(0,o.jsxs)(k.m.div,(0,r._)((0,i._)({className:" grid grid-rows-auto-1fr overflow-hidden relative z-[99999] ".concat(f?"order-1":"order-2"," ").concat(p&&g?"":"bg-backgroundLight dark:bg-backgroundOverlay ")},P),{children:[(0,o.jsx)(en,{openWidget:u,closeWidget:s,position:"bottom",isChatActive:n,widget:c,overrides:l,suggestedIdx:y,onClickSend:M}),_?(0,o.jsx)(ee,{isReady:_,overrides:l,widget:c,isChatActive:n,suggestedIdx:y,clickedSend:T}):null]}),"chatActiveKey"):(0,o.jsxs)(k.m.div,(0,r._)((0,i._)({className:" ".concat(G?" rounded-t-[5px]":"dark:bg-backgroundOverlay bg-backgroundLight","  relative overflow-hidden grid grid-rows-auto-1fr-auto ").concat(f?"order-1":"order-2")},P),{children:[(0,o.jsx)(en,{openWidget:u,closeWidget:s,position:"top",isChatActive:n,widget:c,overrides:l,suggestedIdx:y,onClickSend:M}),_||h?(0,o.jsx)(ee,{isReady:_,overrides:l,isChatActive:n,clickedSend:T,suggestedIdx:x,widget:c}):null]}),"chatActiveKey")})},ee=function(e){var t=e.isReady,n=e.overrides,i=e.isChatActive,r=e.suggestedIdx,a=e.clickedSend,s=e.widget,c=(0,W.a)().agentInfo.configuration,u=c.showOneAiBranding,l=c.showCreateAgentLink,d=Z({widget:s,overrides:n}),g=d.isBottomDesktop,p=d.widgetIsSide,f=d.desktopBottomWidgetConfig;(0,j.useEffect)(function(){var e=document.getElementById("widget-container");e&&(e.scrollTop=0)},[]);var h=(null==n?void 0:n.isSupportAgent)===!0,v=(null==n?void 0:n.isStudioPreview)===!0,m=(null==n?void 0:n.justChat)===!0,_=(0,y.$h)().isDark;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{id:"widget-container",style:{scrollbarGutter:"stable"},className:"h-full overflow-y-auto   ".concat(p&&!m?"w-[350px]":""," ").concat(g?"":h?"!bg-backgroundOverlayLight dark:!bg-[#272535]":"!bg-backgroundOverlayLight dark:!bg-background"," "),children:[t?(0,o.jsx)(U.z,{isSupportAgent:h,isBottomDesktop:g,isWidget:!0,justChat:m}):null,(0,o.jsx)(I.Z,{isBottomDesktop:g,isSupportAgent:h,getWidgetBackground:function(){var e=(100-f.background_transparency)/100;return"rgba(".concat(_?"25, 25, 25":"166, 166, 166",", ").concat(e,")")}})]}),(0,o.jsx)(G.x,{isWidget:!0,isSupportAgent:h,isStudioPreview:v,isWidgetChatActive:i,suggestedIdx:r,clickedSend:a}),(0,o.jsx)(B.Z,{showCreateAgentLink:l,showOneAiBranding:u,isSupportAgent:h,isStudioPreview:v,isChatActive:i,isWidget:!0,isBottomDesktop:g})]})},et=function(){return(0,o.jsx)("span",{className:"hidden",children:(0,o.jsx)(V,{})})},en=function(e){var t,n=e.closeWidget,i=e.position,r=e.isChatActive,s=e.widget,c=e.openWidget,u=e.overrides,l=e.suggestedIdx,d=e.onClickSend,g=(0,W.a)().agentInfo,p=g.displayName,f=g.publicName,h=Z({widget:s}),v=h.isBottom,m=h.isBubble,A=h.widgetIsSide,x=(0,y.$h)().theme,w=(0,S.s2)(),I=(0,a._)((0,j.useState)(!1),2),T=I[0],N=I[1],D=(0,a._)((0,j.useState)(!1),2),k=D[0],O=D[1],L=v&&!r,R=null,P=(null==u?void 0:u.isSupportAgent)===!0,G=null==u?void 0:u.justChat,U=(null==u?void 0:u.isStudioPreview)===!0,F=(null==s?void 0:null===(t=s.desktop)||void 0===t?void 0:t.widget_type)==="bottom"&&!w;return(0,o.jsx)("div",{role:v?"button":void 0,onTouchMove:function(e){if(e.stopPropagation(),!T&&v&&!k){if(N(!0),r){if(R&&e.touches[0].clientY<R){N(!1);return}O(!0),n()}else if(R&&e.touches[0].clientY>R){N(!1);return}c(e),O(!0),setTimeout(function(){N(!1)},50)}},onTouchStart:function(e){e.stopPropagation(),R=e.touches[0].clientY,O(!1)},onTouchEnd:function(){R=null},onClick:function(e){e.preventDefault(),e.stopPropagation(),(v||w||!m)&&(r?n():c())},style:{boxShadow:F?void 0:r&&"top"===i?"0px 2px 4px 0px #0000004D":void 0},className:"sticky w-full  grid-cols-1fr-auto ".concat(F&&!r?"!bg-[gray] rounded-md bg-clip-padding backdrop-filter shadow-widgetDesktopShadow backdrop-blur !bg-opacity-20 border-opacity-50 overflow":"overflow-hidden","  ").concat((m||v)&&r?F?"":"border-t border-t-backgroundOverlayLight dark:border-t-background":"","   touch-none ").concat(P||G||m||A?"pt-3":""," ").concat(r?"":m&&w?"hidden":""," h-fit  place-items-start top-0  items-center z-[9999999]  ").concat(L?"":U?"":"gap-x-4 px-2"," \n      \n      ").concat(("top"===i||r)&&!F?"pb-2 shadow-lightTopSmall dark:shadow-darkTopSmall":v?"h-[56px]":"h-[56px] pb-2","\n\n      ").concat(P||F?"":w||m?"":"bottom"!==i||r?"!bg-[#fff]":"!bg-[#efefef]","\n\n      ").concat(P?"dark:bg-[#1D1C29]":w||m?"top"===i||r?F?"":"dark:!bg-[#302F43] bg-[#ffffff]":"":"top"===i||r?F?"":" dark:!bg-[#302F43] bg-[#ffffff]":" dark:!bg-[#1D1C29]","\n      "),children:v&&!r?(0,o.jsx)(J,{isStudioPreview:U,widget:s,isChatActive:r,onClick:function(){},onClickSend:d,suggestedIdx:l}):(0,o.jsxs)("div",{className:"grid  ".concat(U?"border-t-2 border-t-[#3D3C56] grid-rows-auto-1fr gap-y-2 ":""),children:[v?(0,o.jsx)(Y,{widget:s,isChatActive:r,isStudioPreview:U}):null,v&&!U?null:(0,o.jsxs)("div",{className:"grid grid-cols-1fr-auto ".concat(m||F?"px-4":""),children:[(0,o.jsxs)("div",{className:"grid grid-cols-auto-1fr gap-x-4 items-center w-fit overflow-hidden ".concat(U?"px-4":""),children:[(null==s?void 0:s.avatar)?(0,o.jsx)(z,{avatar:s.avatar}):"light"===x?(0,o.jsx)(b.Z,{}):(0,o.jsx)(C.Z,{}),(0,o.jsx)(M.NG,{publicName:f,title:p,showStats:!1,type:"SMALL"})]}),G?(0,o.jsxs)("div",{className:"grid items-center justify-center grid-cols-auto-1fr gap-x-2 invisible",children:[(0,o.jsx)("p",{className:"!text-cyan font-light",children:"Popout"}),(0,o.jsx)(E.Z,{className:"text-cyan"})]}):null,m&&w?(0,o.jsx)("button",{className:"grid place-items-center",onClick:function(){n()},children:(0,o.jsx)(_.Z,{})}):null]})]})})},ei=function(e){var t=e.isChatActive,n=e.isWidgetHovered,i=(0,W.a)().agentInfo.displayName;return t?null:(0,o.jsx)("div",{className:"rotate-90",children:(0,o.jsxs)("div",{className:"h-full grid cursor-pointer grid-cols-auto-1fr gap-x-4 items-center justify-center",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(x.Z,{className:"text-black absolute origin-center z-10 top-[18px] left-[8px] transition-rotate transform duration-300 ".concat(n?"":"-rotate-90")}),(0,o.jsx)(d.Z,{className:"-rotate-90 text-white"})]}),(0,o.jsx)("span",{className:"font-mono text-[20px] text-white whitespace-nowrap w-min",children:i})]})})},er=function(e,t,n){var r,a,o=(0,w.Cc)({widget:e,overrides:n});return(0,i._)({isReady:!0,state:null==t?void 0:null===(r=t())||void 0===r?void 0:r.state,stateTimestamp:null==t?void 0:null===(a=t())||void 0===a?void 0:a.timestamp},o)};t.Z=function(e){var t=e.shouldPushEvent,n=e.query,i=(0,a._)((0,j.useState)(!0),2),r=i[0],s=i[1],c=(0,a._)((0,j.useState)(!1),2),u=c[0],l=c[1],d=(0,a._)((0,j.useState)(!1),2),g=d[0],p=d[1],f=(0,a._)((0,j.useState)(),2),h=f[0],v=f[1],m=(0,y.$h)().setTheme,_=(0,a._)((0,j.useState)(!1),2),E=_[0],A=_[1],x=(0,a._)((0,j.useState)(0),2),C=x[0],b=x[1],w=n.justChat,I=n.isStudioPreview,S=n.isSupportAgent,N=(0,a._)((0,j.useState)({isSupportAgent:"true"===S,justChat:"true"===w,isStudioPreview:"true"===I}),2),D=N[0],k=N[1],O=(0,a._)((0,j.useState)(!1),2)[1],L=(0,W.a)(),R=L.isWidget,P=L.methods,M=P.setWidgetParentTitle,G=P.resetChat,U=P.setMessage,B=L.agentInfo,V=B.agentId,Y=B.configuration.widget,J=(0,K.useEventLogger)().eventLogger;(0,H.aF)().data,(0,H.IA)().data;var z=(0,F.Z)({agentId:V}),ee=z.setWidgetState,en=z.getWidgetState,ei=(0,a._)((0,j.useState)(!1),2),ea=ei[0],eo=ei[1],es=(0,a._)((0,j.useState)(t),2),ec=es[0],eu=es[1],el=Z({widget:Y,overrides:D}),ed=el.isMobile,eg=el.isBubble,ep=el.isBottom,ef=el.widgetIsLeft,eh=el.activeDeviceConfig,ev=el.widgetIsSide,em=el.isAutoOpen,e_=el.widget,eE=el.justChat,eA=el.isBottomDesktop,ex=(0,a._)((0,j.useState)(em),2),eC=ex[0],eb=ex[1],ey=(0,a._)((0,j.useState)(!1),2),ew=ey[0],eI=ey[1];if((0,j.useEffect)(function(){em&&h&&(null==h||h.toggleChatActive(!0,er(e_,en,D)),J(T.uE.EMBEDDED_AGENT_AUTO_EXPANDED),p(!0),setTimeout(function(){eb(!1)},2e3),ee({state:"opened",timestamp:new Date().getTime()})),l(!0)},[em,h]),(0,j.useEffect)(function(){var e=X({setParent:v,setOpenManually:O,expanded:r,setExpanded:s,widget:e_,setOverrides:k,getWidgetState:en,setWidgetParentTitle:M,setToggleCloseWidet:b,openWidget:eT,_resetChat:G});void 0!==e&&m(e),eo(!0)},[r,ew]),(0,j.useEffect)(function(){R&&setInterval(function(){h||eI(function(e){return!e})},2e3)},[h,R]),(0,j.useEffect)(function(){C>0&&(eS(!0),b(0))},[C]),(0,j.useEffect)(function(){if(ec&&ea&&window.self!==window.top){var e,t,n,i;J(T.uE.EMBED_SUCCESS,{host_domain:(null===(e=document)||void 0===e?void 0:e.referrer)?new URL(null===(t=document)||void 0===t?void 0:t.referrer).hostname:window.location.hostname,host_path:(null===(n=document)||void 0===n?void 0:n.referrer)?new URL(null===(i=document)||void 0===i?void 0:i.referrer).pathname:window.location.pathname}),eu(!1)}},[ec,ea]),(0,j.useEffect)(function(){if(g&&window.self!==window.top&&!eC){var e,t,n,i;J(T.uE.EMBEDDED_AGENT_EXPANDED,{host_domain:(null===(e=document)||void 0===e?void 0:e.referrer)?new URL(null===(t=document)||void 0===t?void 0:t.referrer).hostname:window.location.hostname,host_path:(null===(n=document)||void 0===n?void 0:n.referrer)?new URL(null===(i=document)||void 0===i?void 0:i.referrer).pathname:window.location.pathname})}g&&ee({state:"opened",timestamp:new Date().getTime()})},[g]),(null==eh?void 0:eh.visible)===!1)return null;var eS=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(arguments.length>1&&arguments[1],!g&&!e){eT();return}null==h||h.toggleChatActive(!1,er(e_,en,D)),p(!1),O(!1),s(!1),C||J(T.uE.EMBEDDED_AGENT_COLLAPSED),ee({state:"closed",timestamp:new Date().getTime()})},eT=function(e){(null==e?void 0:e.message)&&U(null==e?void 0:e.message),g||(null==h||h.toggleChatActive(!0,er(e_,en,D)),p(!0),O(!0),s(!0))};return u?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Q,{setIsWidgetHovered:A,isChatActive:g,widget:e_,overrides:D,children:(0,o.jsxs)("div",{className:"".concat(eE?"":"grid","  ").concat(eg?ed?"":"grid-rows-1fr-auto gap-y-2":ep?"":"grid-cols-auto-1fr"," h-full w-full max-h-[100dvh]"),children:[eE||ep?null:(0,o.jsxs)("div",{className:"".concat(ed&&eg?"":" h-full","  grid ").concat(ep?"!w-full overflow-hidden":"overflow-auto "," ").concat(ev?"relative":""," ").concat(ef?"order-2":""," ").concat(g?eg?"":"w-[36px]":eg?"w-[56px] h-[56px]":"w-[88px]"," "),children:[ev?(0,o.jsx)("div",{className:"!bg-white absolute w-2 h-full  ".concat(ef?"left-0":"right-0"),children:(0,o.jsx)("div",{className:"h-full",style:{backgroundColor:"rgb(".concat(e_.primary_color,", 0.5)")}})}):null,(0,o.jsx)(q,{overrides:D,isWidgetHovered:E,widget:e_,onClick:function(){eS()},isChatActive:g})]}),(0,o.jsx)("div",{className:"h-full w-full overflow-auto grid",style:{boxShadow:eA||eg?"0px 2px 4px rgba(0,0,0,0.1)":void 0},children:(0,o.jsx)($,{isChatActive:g,closeWidget:function(){eS()},openWidget:eT,widget:e_,overrides:D})}),eg&&!ed||eg&&ed&&!g?(0,o.jsx)("div",{className:"h-[60px] bg-[transparent]"}):null]})}),(0,o.jsx)(et,{})]}):null}},6550:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(2253),r=n(4932),a=n(5893),o=n(9844),s=n(3918),c=n(287),u=n(3293),l=n(8262),d=n(362);function g(e){var t=(0,d.a)(),n=t.isAtWidgetOrIframe,g=t.isAgentMaker,p=t.agentInfo.configuration,f=p.showOneAiBranding,h=p.showCreateAgentLink,v=t.methods.navigateToAgentMaker,m=(0,l.useEventLogger)().eventLogger;return(0,a.jsx)(c.D,(0,r._)((0,i._)({},e),{onClickCreateAgent:function(e){if(m(s.V1.CREATE_AGENT_CLICKED),e.preventDefault(),e.stopPropagation(),n){window.open("".concat(u.aY,"/~agentmaker"),"_blank");return}v();try{if(!(0,o.ai)())return;window.parent.postMessage({event:"CREATE_AGENT"},"https://studio.oneai.com")}catch(e){}},onClickOneAI:function(){m(s.V1.ONEAI_CLICKED)},isAgentMaker:g,isAtWidgetOrIframe:n,showCreateAgentLink:h,showOneAiBranding:f}))}},2134:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(3918),r=n(3293),a=n(8262);function o(){var e=(0,a.useEventLogger)().eventLogger;return{triggerEmbedEvent:function(t){e(r.uE.EMBEDDED_CODE_COPIED,void 0,void 0,t)},triggerEmbedToggleEvent:function(t){e(r.uE.EMBEDDED_CODE_CLICKED,void 0,void 0,t)},triggerConversationClickedEvent:function(t){e(i.V1.INCLUDE_CONVERSATION_CLICKED,{include_conversation:t})},triggerOnShareEvent:function(t){e(i.V1.SHARE_CONVERSATION_COPIED,t)},triggerOnShareAgentEvent:function(t,n){e(i.V1.SHARE_AGENT_COPIED,t,void 0,n)},triggerShareButtonsEvent:function(t,n){(null==t?void 0:t.include_conversation)?e(i.V1.SHARE_CONVERSATION_COPIED,t,void 0,n):e(i.V1.SHARE_AGENT_COPIED,t,void 0,n)}}}},8262:function(e,t,n){n.r(t),n.d(t,{SESSION_COOKIE_NAME:function(){return b},useEventLogger:function(){return y}});var i=n(1010),r=n(2253),a=n(4932),o=n(4043),s=n(1640),c=n(248),u=n(7582),l=n(2060),d=n(9844),g=n(3918),p=n(1171),f=n(9664),h=n(9736),v=n(4862),m=n(3293),_=n(1163),E=n(7294),A=n(3688),x=n(362),C=n(3197),b=m.im?"SESSION_ID_STAGE":"SESSION_ID_PROD",y=function(){var e,t=w().createUserEventData,n=(0,x.a)().agentInfo.publicName,l=(0,_.useRouter)(),d=(0,o._)((0,E.useState)([]),2),g=d[0],p=d[1],f=(e=(0,i._)(function(e,n,i,r){var a,o,s,c,l=arguments;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return a=l.length>4&&void 0!==l[4]&&l[4],[4,t(e,n,i,r)];case 1:if(c=u.sent(),(0,h.zH)(c,a),"oneai.com"===c.host_domain&&((null===(o=c.path)||void 0===o?void 0:o.startsWith("/chat/"))||(null===(s=c.path)||void 0===s?void 0:s.startsWith("/~chat/"))))return[2];return T(void 0,e,!c.is_owner),[2]}})}),function(t,n,i,r){return e.apply(this,arguments)});return(0,E.useEffect)(function(){if(g.length){var e=(0,s._)(g),t=e[0],i=e.slice(1);if("PUBLIC_NAME_CHNAGE"===t.trigger){if("agentmaker"!==n&&"TEMPORARY_AGENT"!==n&&!l.asPath.startsWith("/~agentmaker")){var o=window.localStorage.getItem("createAgentStartTime"),c=(new Date().getTime()-Number(o))/1e3,u=(0,a._)((0,r._)({},t.data),{total_loading_time:c});f(t.eventName,u),p(i),window.localStorage.removeItem("createAgentStartTime")}}else f(t.eventName,t.data),p(i)}},[g,n,l.asPath]),{eventLogger:f,addToEventsQueue:function(e,t,n){p(function(i){return(0,c._)(i).concat([{eventName:e,trigger:t,data:n}])})}}},w=function(){var e,t,a=(0,_.useRouter)(),s=(0,h.fP)().getCookie,c=(0,x.a)(),d=c.agentInfo,g=c.isWidget,y=c.userInfo,w=c.userInfo,I=w.userId,S=w.temporaryUserId,T=c.agentInfo.configuration,N=T.widget,D=T.widget.auto_open_in_load,k=c.methods.setUserInfo,O=a.query,L=O.justChat,R=O.isStudioPreview,j={isSupportAgent:"true"===O.isSupportAgent,justChat:"true"===L,isStudioPreview:"true"===R},P=(0,A.f)({widget:N,overrides:j}).activeDeviceConfig,M=(0,l.x)().data,G=(0,f.L)({setUserInfo:k}).data,U=(0,C.IA)().data,F=(0,p.x)({firebaseUser:U,userInfo:y}).awaitApiKey,B=(0,o._)((0,E.useState)(null),2),K=B[0],H=B[1],W=(0,o._)((0,E.useState)(!1),2)[1];(0,E.useEffect)(function(){var e;(e=(0,i._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,Promise.resolve().then(n.bind(n,5518))];case 1:return H(e.sent()),[3,4];case 2:return console.error("Error while loading:",e.sent()),[3,4];case 3:return W(!0),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[]);var V=null!=M&&null!==(t=M.myAgents)&&void 0!==t&&!!t.length&&!!M.myAgents.find(function(e){return e.agent_id===d.agentId});return{createUserEventData:(e=(0,i._)(function(e,t,n,i){var o,c,l,p,f,h,_,E,A,x,C,w,T,N,k,O,L,R,B;return(0,u.Jh)(this,function(u){switch(u.label){case 0:x="",u.label=1;case 1:return u.trys.push([1,3,,4]),[4,F()];case 2:return x=u.sent(),[3,4];case 3:return u.sent(),x="ANONYMOUS",[3,4];case 4:return C=null==I?void 0:I.includes("-"),w=null!=M&&null!==(o=M.myAgents)&&void 0!==o&&!!o.length&&!!M.myAgents.find(function(e){return e.agent_id===(null==i?void 0:i.agent_id)}),T={utm:{utm_source:s("utm_source"),utm_medium:s("utm_medium"),utm_campaign:s("utm_campaign"),utm_content:s("utm_content"),campaignid:s("campaignid"),groupid:s("groupid"),utm_term:s("utm_term"),_ga:s("_ga")}},N=i?i.public_name:d.publicName||"",k=(null==K?void 0:K.deviceType)==="browser"?"desktop":(null==K?void 0:K.deviceType)||"unknown",O=(0,r._)({device:{type:k,brand:(null==K?void 0:K.isMobile)?null==K?void 0:K.mobileVendor:"unknown",model:(null==K?void 0:K.isMobile)?(0,v.fj)(K.getUA)?(0,v.fj)(K.getUA):null==K?void 0:K.mobileModel:"unknown"},referrer:(null===(c=document)||void 0===c?void 0:c.referrer)||"",user_agent:(null===(l=navigator)||void 0===l?void 0:l.userAgent)||""},T),L=new URL(a.asPath,m.aY).pathname,R=(null===(p=a.pathname)||void 0===p?void 0:p.startsWith("/chat/"))||(null==a?void 0:null===(f=a.pathname)||void 0===f?void 0:f.startsWith("/~chat/")),B=void 0===D||D,[2,{user_id:C?"":s(m.F4)||I,agent_id:i?i.agent_id:d.agentId,path:L,chat_id:(null==t?void 0:t.chat_id)?null==t?void 0:t.chat_id:d.chatId||null,api_key:s(m.F4)||I?x:"ANONYMOUS",type:e,datetime:new Date().toISOString(),data:t?(0,r._)({},t,O):O,is_owner:N?!!V||w||n||!1:void 0,agent_name:i?i.public_name:"TEMPORARY_AGENT"===d.publicName?"agentmaker":d.publicName||"",timestamp:new Date().toISOString(),one_id:(null==y?void 0:y.oneId)||s("ONEAI_UNIQUE_ID"),session_id:s(b),org_id:C?"":I,widget_type:g?j.justChat?void 0:P.widget_type:void 0,widget_position:g&&("bottom"===P.widget_type&&!(0,v.s2)()||"side"===P.widget_type||"bubble"===P.widget_type)?P.location:void 0,widget_auto_load:g?B:void 0,host_domain:R&&(null===(h=document)||void 0===h?void 0:h.referrer)?new URL(null===(_=document)||void 0===_?void 0:_.referrer).hostname:window.location.hostname,host_path:R&&(null===(E=document)||void 0===E?void 0:E.referrer)?new URL(null===(A=document)||void 0===A?void 0:A.referrer).pathname:L,geo_location:G,user_email:(null==U?void 0:U.email)?null==U?void 0:U.email:"",user_state:S||C||!(null==U?void 0:U.email)?"anonymous":I||s(m.F4)?"logged_in":"logged_out"}]}})}),function(t,n,i,r){return e.apply(this,arguments)})}},I=function(e){for(var t="abcdefghijklmnopqrstuvwxyz123456789",n="session-";e--;){var i=Math.floor(Math.random()*t.length);n+=t[i]}return n},S=[{event_name:m.uE.SUGGESTED_QUERY_MADE,conversion_id:"VXwICOaI798YEMTig7Eo",visitor_conversion_id:"VXwICOaI798YEMTig7Eo"},{event_name:g.V1.QUERY_MADE,conversion_id:"JuvxCPOV798YEMTig7Eo",visitor_conversion_id:"JuvxCPOV798YEMTig7Eo"},{event_name:g.V1.CLICKED_CLAIM_AGENT,conversion_id:"DyUnCMv65d8YEMTig7Eo",visitor_conversion_id:"DyUnCMv65d8YEMTig7Eo"},{event_name:g.V1.CREATE_AGENT_CLICKED,conversion_id:"B2r6CJjo5d8YEMTig7Eo",visitor_conversion_id:"B2r6CJjo5d8YEMTig7Eo"},{event_name:g.V1.CREATE_AGENT_BUTTON_CLICKED,conversion_id:"B2r6CJjo5d8YEMTig7Eo",visitor_conversion_id:"B2r6CJjo5d8YEMTig7Eo"},{event_name:m.uE.EMBEDDED_CODE_COPIED,conversion_id:"lRtkCOuf798YEMTig7Eo",visitor_conversion_id:"xEK5CJHeheAYEMTig7Eo"},{event_name:g.V1.EMBED_SUCCESS,conversion_id:"7lAoCL755d8YEMTig7Eo",visitor_conversion_id:"7lAoCL755d8YEMTig7Eo"},{event_name:g.V1.EDITED_AGENT_PROFILE,conversion_id:"_yeaCMj65d8YEMTig7Eo"},{event_name:g.V1.CLICKED_CONTACT_SALES,conversion_id:"Tq2uCLz65d8YEMTig7Eo",visitor_conversion_id:"Tq2uCLz65d8YEMTig7Eo"},{event_name:g.V1.SIGNUP_COMPLETED,conversion_id:"cBRWCML65d8YEMTig7Eo",visitor_conversion_id:"cBRWCML65d8YEMTig7Eo"},{event_name:g.V1.SHARE_AGENT_COPIED,conversion_id:"23YrCOif798YEMTig7Eo",visitor_conversion_id:"JERqCI7eheAYEMTig7Eo"},{event_name:g.V1.SIGNUP_COMPLETED,conversion_id:"cBRWCML65d8YEMTig7Eo",visitor_conversion_id:"cBRWCML65d8YEMTig7Eo"},{event_name:g.V1.STARRED_AGENT,conversion_id:"dQz-CMX65d8YEMTig7Eo",visitor_conversion_id:"dQz-CMX65d8YEMTig7Eo"},{event_name:g.V1.SHARE_CONVERSATION_COPIED,conversion_id:"23YrCOif798YEMTig7Eo",visitor_conversion_id:"JERqCI7eheAYEMTig7Eo"},{event_name:g.V1.PRICING_CLICKED,conversion_id:"YQVrCLn65d8YEMTig7Eo",visitor_conversion_id:"YQVrCLn65d8YEMTig7Eo"},{event_name:g.V1.ADDED_CONTENT,conversion_id:"Pj_JCOWf798YEMTig7Eo",visitor_conversion_id:"Pj_JCOWf798YEMTig7Eo"}],T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;try{console.debug("[gtagReportConversion]",{userEvent:t,isVisitor:n});var i=S.find(function(e){return(null==e?void 0:e.event_name)===t});if(i){var r=n?i.visitor_conversion_id:i.conversion_id;gtag("event","conversion",{send_to:"AW-10840240452/"+r,event_callback:function(){void 0!==e&&(window.location=e)}})}return!1}catch(e){console.error("[gtagReportConversion] error gtag_report_conversion event",t,e)}};t.default=function(){var e=(0,h.fP)(),t=e.getCookie,n=e.setCookie,a=e.deleteCookie,o=(0,_.useRouter)(),s=t(b),c=y().eventLogger,l=(0,C.IA)().isLoading,p=(0,C.aF)().data,f=(0,C.IA)().data,A=(0,x.a)(),w=A.userInfo,S=w.orgId,T=w.userId,N=w.isAnonymous,D=A.agentInfo,k=D.publicName,O=D.orgId,L=t("ONEAI_UNIQUE_ID_CREATED");return(0,E.useEffect)(function(){"true"===L&&(console.debug("Visitor Created"),c(g.V1.VISITOR_CREATED),a("ONEAI_UNIQUE_ID_CREATED"))},[L]),(0,E.useEffect)(function(){s||n(b,I(24),0,!0)},[s]),(0,E.useEffect)(function(){var e;f&&(e=(0,i._)(function(){var e,t,n,i,r,a,s,l,d,f,h;return(0,u.Jh)(this,function(u){if(s=parseInt(window.localStorage.getItem("pageStartLoading")||"0",10),l=(null==o?void 0:null===(n=o.asPath)||void 0===n?void 0:null===(t=n.split("~"))||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e[0])==="/"||(null==o?void 0:null===(a=o.asPath)||void 0===a?void 0:null===(r=a.split("~"))||void 0===r?void 0:null===(i=r[1])||void 0===i?void 0:i[0])===void 0,!s)return[2];if(d=(new Date().getTime()-s)/1e3,h={page:f=new URL(o.asPath,m.aY).pathname,page_type:l?"HUB":"AGENT",total_loading_time:d>0?d:0},"/~agentmaker"===f){if("agentmaker"!==k)return[2];c(g.V1.PAGE_LOADED,h,O===S),c(g.V1.AGENT_MAKER_LOADED,{page:f,total_loading_time:d>0?d:0})}else{if("/~"===o.asPath||o.asPath.startsWith("/~/"))return c(g.V1.PAGE_LOADED,h,O===S),[2];c(g.V1.PAGE_LOADED,h,O===S),c(g.V1.AGENT_PAGE_LOADED,{page:f,total_loading_time:d>0?d:0,test:p?p.apiKey:"anonymous"},O===S)}return window.localStorage.removeItem("pageStartLoading"),[2]})}),function(){return e.apply(this,arguments)})()},[o.asPath,k,f,T,N]),(0,E.useEffect)(function(){l||c(g.V1.PAGE_VISITED,{page:o.asPath},O===S)},[o.asPath,k,l]),(0,E.useEffect)(function(){var e=function(e){"/~agentmaker"===e?c(g.V1.AGENT_MAKER_START_LOADING,{page:e}):c(g.V1.PAGE_START_LOADING,{page:e}),window.localStorage.setItem("pageStartLoading",new Date().getTime().toString())};return o.events.on("routeChangeStart",e),function(){o.events.off("routeChangeStart",e)}},[o,k]),(0,E.useEffect)(function(){var e=function(){var e=(0,v.PC)();try{e&&c(e.eventName,(0,r._)({},e.payload),void 0,void 0,!0)}catch(e){}};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[]),(0,E.useEffect)(function(){try{var e,t=window.performance.getEntriesByType("navigation"),n=null==t?void 0:null===(e=t[0])||void 0===e?void 0:e.type;"reload"!==n||(0,d._h)()||c(g.V1.BROWSER_REFRESHED)}catch(e){}},[]),null}},3197:function(e,t,n){n.d(t,{IA:function(){return _},aF:function(){return E},d0:function(){return m}});var i=n(1010),r=n(4043),a=n(7582),o=n(5893),s=n(7211),c=n(9844),u=n(3918),l=n(9736),d=n(3293),g=n(1163),p=n(7294),f=n(1758),h=n(9664),v=n(362),m=function(){var e,t,n=(0,v.a)(),r=n.isWidget,o=n.userInfo.userId,u=n.methods.setUserInfo,d=(0,l.fP)(r),g=d.getCookie,p=d.setCookie,f=d.deleteCookie,h=(e=(0,i._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:(t=g("ChatHistory_ANONYMOUS"))&&(p("ChatHistory_".concat(e.org_id),t),f("ChatHistory_ANONYMOUS")),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,s.b3)("",e.org_id,!0,!0,m().recentAgents.map(function(e){return{agent_id:e.agent_id,edited_at:e.edited_at}}),m().starredAgents.map(function(e){return{agent_id:e.agent_id,edited_at:e.edited_at}}))];case 2:return n.sent(),_(),[3,4];case 3:return console.error("[ERROR] mergeUser",n.sent()),[3,4];case 4:return u({userId:(null==e?void 0:e.org_id)||"",isTemporaryUser:!0,apiKey:null==e?void 0:e.api_key}),[2]}})}),function(t){return e.apply(this,arguments)}),m=function(){return o?{myAgents:[],starredAgents:[],recentAgents:[]}:{myAgents:JSON.parse(localStorage.getItem(c.uR.MY_AGENTS)||"[]"),starredAgents:JSON.parse(localStorage.getItem(c.uR.MY_AGENTS_FAVORITES)||"[]"),recentAgents:JSON.parse(localStorage.getItem(c.uR.MY_AGENTS_RECENTS)||"[]")}},_=function(){o||(localStorage.removeItem(c.uR.MY_AGENTS),localStorage.removeItem(c.uR.MY_AGENTS_FAVORITES),localStorage.removeItem(c.uR.MY_AGENTS_RECENTS))};return{removeAgentsFromLocalStorage:_,saveAgentInLocalStorage:(t=(0,i._)(function(e,t){var n,i,r,s;return(0,a.Jh)(this,function(a){return o||((n=localStorage.getItem(t),i=(0,c.aN)(e),n)?((s=(r=JSON.parse(n)).find(function(e){return e.agent_id===i.agent_id}))&&(r=r.filter(function(e){return e.agent_id!==i.agent_id})),t===c.uR.MY_AGENTS_FAVORITES&&s||r.push((0,c.aN)(i)),localStorage.setItem(t,JSON.stringify(r))):localStorage.setItem(t,JSON.stringify([i]))),[2]})}),function(e,n){return t.apply(this,arguments)}),getLocalStorageAgents:m,createAnonymousUser:h}},_=function(){var e,t,n,o=(0,v.a)(),c=o.userInfo,h=c.isTemporaryUser,m=c.userId,_=o.methods,E=_.setUserInfo,A=_.setShouldLogout,x=(0,g.useRouter)(),C=(0,l.fP)(),b=C.getCookie,y=C.deleteCookie,w=m||b(d.F4),I=!!w&&!h,S=x.pathname,T=x.asPath,N=x.query,D=(0,r._)((0,p.useState)("LOADING"),2),k=D[0],O=D[1],L=(0,f.kY)().mutate;(0,p.useEffect)(function(){I?O("POPULATED"):O("EMPTY")},[I,w]);var R=(e=(0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,s.V)(w)];case 1:return[2,e.sent()]}})}),function(){return e.apply(this,arguments)}),j=(0,f.ZP)(I?[u.ch.USER,w]:void 0,R,{keepPreviousData:!0,refetchOnWindowFocus:!0,revalidateOnMount:!0,focusThrottleInterval:5e3}),P=j.data,M=j.isLoading,G=j.error,U=j.mutate,F=(null==P?void 0:null===(t=P.email)||void 0===t?void 0:t.endsWith("@oneai.com"))||(null==P?void 0:null===(n=P.email)||void 0===n?void 0:n.endsWith("@onezero.co.il"));return{data:P,isLoading:M,error:G,mutate:U,isAdmin:F,logOut:function(){y(d.F4),y(d.b6),y(d.XR),y(d.qf),y(d.xu),y(d.x2),A(!0),E({userId:"",apiKey:"",isAnonymous:!1,isTemporaryUser:!1}),x.push({pathname:S,query:N},T),L([u.ch.USER,d.F4],(0,i._)(function(){return(0,a.Jh)(this,function(e){return[2,{user:null}]})}),!1),L(["userApiKey",m||b(d.F4)],(0,i._)(function(){return(0,a.Jh)(this,function(e){return[2,{user:null}]})}),!1),L(u.ch.HUB,(0,i._)(function(){return(0,a.Jh)(this,function(e){return[2,{myAgents:[],recentAgents:[],starredAgents:[]}]})}),!1)},isAnonymous:!(null==P?void 0:P.email),regularUser:I,isLoggedIn:P?"POPULATED"===k&&!!(null==P?void 0:P.email):"POPULATED"===k||"LOADING"===k}},E=function(){var e=(0,l.fP)(),t=e.setCookie,n=e.getCookie,r=(0,v.a)().userInfo,o=r.userId,c=r.isTemporaryUser,u=o||n(d.F4),g=(0,f.ZP)(c?void 0:u?["userApiKey",u]:void 0,(0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,s.is)(u,c)];case 1:return[2,e.sent()]}})}),{keepPreviousData:!0,refetchOnWindowFocus:!1,onSuccess:function(e){(null==e?void 0:e.apiKey)&&(t(d.XR,e.apiKey),t(d.qf,String(e.isAnonymous))),(null==e?void 0:e.orgId)&&t(d.b6,e.orgId)}});return{data:g.data,mutate:g.mutate}};t.ZP=function(){var e=(0,l.fP)(),t=e.getCookie,n=e.setCookie,r=t(d.F4),s=(0,v.a)(),c=s.shouldLogout,u=s.methods,g=u.setShouldLogout,f=u.setUserInfo;(0,h.L)({setUserInfo:f}).data;var m=E().data,_=d.im?"VISITED_STAGE":"VISITED_PROD",A=t(_),x=(0,p.useRef)(!1);return(0,p.useEffect)(function(){m&&r&&!A&&n(_,new Date().toISOString())},[r,m,A]),(0,p.useEffect)(function(){var e,t=(e=(0,i._)(function(){return(0,a.Jh)(this,function(e){return n(_,new Date().toISOString()),x.current=!0,[2]})}),function(){return e.apply(this,arguments)});r||x.current||t()},[r]),(0,p.useEffect)(function(){c&&setTimeout(function(){g(!1)},5e3)},[c]),c?(0,o.jsx)("div",{className:"hidden",children:(0,o.jsx)("iframe",{src:"".concat("https://studio.oneai.com","/agent-logout")})}):null}},362:function(e,t,n){n.d(t,{K:function(){return r},a:function(){return a}});var i=n(7294),r=(0,i.createContext)(null),a=function(){return(0,i.useContext)(r)}},5e3:function(e,t,n){n.r(t),n.d(t,{ALLOWED_EXTENSIONS:function(){return C},DropContextProvider:function(){return x},DropZone:function(){return b}});var i=n(1010),r=n(2253),a=n(4932),o=n(4043),s=n(7582),c=n(5893),u={src:"/~/_next/static/media/drop-area-border-not-allowed.1f41368f.png",height:253,width:481,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAADFBMVEX/Fhb/Dw/v29vcycmdVdQaAAAABHRSTlMBCwwaVq1YaAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAB5JREFUeJxjYIAARhDBxARhMDEzMzEwgiAjIyMDIwABWQAYrslxOgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4},l={src:"/~/_next/static/media/drop-area-border.f8203b5b.png",height:253,width:481,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAABlBMVEX///////9VfPVsAAAAAnRSTlMDEEAJjp8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAATSURBVHicY2BAAoyMcAaMBeICAAB4AAZbhKBXAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},d=n(8262),g=n(7211),p=n(9844),f=n(3293),h=n(5675),v=n.n(h),m=n(7294),_=n(2512),E=n(362),A=(0,m.createContext)(null),x=function(){var e=(0,o._)((0,m.useState)(!1),2),t=e[0],n=e[1];(0,m.useEffect)(function(){var e=function(e){e.preventDefault(),n(!0)},t=function(e){e.preventDefault(),e.relatedTarget&&e.relatedTarget!==document.documentElement||n(!1)},i=function(e){e.preventDefault(),n(!0)},r=function(e){e.preventDefault(),n(!1)};return document.addEventListener("dragover",e),document.addEventListener("dragleave",t),document.addEventListener("drop",r),document.addEventListener("dragenter",i),function(){document.removeEventListener("dragover",e),document.removeEventListener("dragleave",t),document.removeEventListener("drop",r),document.removeEventListener("dragenter",i)}},[]);var i=(0,m.useMemo)(function(){return{isDragging:t,setIsDragging:n}},[t]);return(0,c.jsx)(A.Provider,{value:i,children:(0,c.jsx)(b,{})})},C={"text/plain":[".txt"],"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]};function b(){var e,t=(0,m.useContext)(A),n=t.isDragging,h=t.setIsDragging,x=(0,g.mi)().addAgentFile,b=(0,E.a)(),y=b.isCreatingAgent,w=b.methods.setTouchedAgentMakerBox,I=(0,d.useEventLogger)().eventLogger,S=(0,o._)((0,m.useState)([]),2),T=S[0],N=S[1],D=(0,m.useCallback)((e=(0,i._)(function(e){return(0,s.Jh)(this,function(t){return N(e),h(!1),[2]})}),function(t){return e.apply(this,arguments)}),[n]);(0,m.useEffect)(function(){var e;(e=(0,i._)(function(){var e,t,n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:if(!y)return[3,2];return[4,new Promise(function(e){var t=setInterval((0,i._)(function(){return(0,s.Jh)(this,function(n){return y||(e(y),clearInterval(t)),[2]})}),200)})];case 1:r.sent(),r.label=2;case 2:if(!(T.length>0))return[3,6];w(!1),e=T[0],t=(0,p.FP)(e.type)||"",r.label=3;case 3:return r.trys.push([3,5,,6]),N(function(e){return e.slice(1)}),[4,x({file:e,contentType:t,fileName:e.name,type:"drag"})];case 4:return r.sent(),[3,6];case 5:return n=r.sent(),I(f.uE.DOCUMENT_FAIL),console.error("Error adding file:",n),[3,6];case 6:return[2]}})}),function(){return e.apply(this,arguments)})()},[T,y]);var k=(0,_.uI)({onDrop:D,noClick:!0,accept:C,multiple:!0}),O=k.getRootProps,L=k.getInputProps,R=k.isDragReject;if(n)return(0,c.jsxs)("div",(0,a._)((0,r._)({},O()),{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full h-full bg-background opacity-90 flex justify-center items-center z-10",children:[(0,c.jsx)("input",(0,a._)((0,r._)({},L()),{"data-cy":"upload_file_input_area"})),(0,c.jsx)(v(),{"data-cy":"upload_file_image",quality:100,unoptimized:!0,alt:"Drop area border",src:R?u:l,width:481,height:253})]}))}},548:function(e,t,n){n.d(t,{Z:function(){return h},l:function(){return f}});var i,r=n(5893),a=n(7294);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var s=function(e){return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),i||(i=a.createElement("path",{fill:"#fff",d:"M10.011 0a11.71 11.71 0 0 1 2.33.26c.164.034.311.117.423.237.111.119.181.269.2.428l.181 1.566c.026.221.105.433.232.62.126.185.296.34.496.451a1.523 1.523 0 0 0 1.33.074l1.496-.63a.832.832 0 0 1 .908.178 9.96 9.96 0 0 1 2.355 3.889.74.74 0 0 1-.005.468.771.771 0 0 1-.285.378l-1.326.94a1.433 1.433 0 0 0-.443.501 1.37 1.37 0 0 0 0 1.28c.104.198.256.37.443.502l1.328.938a.772.772 0 0 1 .286.38.74.74 0 0 1 .004.467 9.964 9.964 0 0 1-2.354 3.89.832.832 0 0 1-.907.18l-1.502-.634a1.527 1.527 0 0 0-1.33.072c-.2.11-.37.266-.497.452a1.378 1.378 0 0 0-.23.62l-.181 1.564a.755.755 0 0 1-.196.425.808.808 0 0 1-.414.239c-1.548.353-3.16.353-4.707 0a.808.808 0 0 1-.415-.239.755.755 0 0 1-.196-.425l-.18-1.563a1.382 1.382 0 0 0-.233-.616 1.454 1.454 0 0 0-.496-.45 1.52 1.52 0 0 0-1.327-.072L3.297 17a.832.832 0 0 1-.484.05.81.81 0 0 1-.424-.229 9.965 9.965 0 0 1-2.353-3.893.74.74 0 0 1 .004-.469.772.772 0 0 1 .286-.379l1.328-.94c.187-.13.339-.303.443-.5a1.37 1.37 0 0 0 0-1.28 1.432 1.432 0 0 0-.443-.502L.326 7.92a.772.772 0 0 1-.286-.379.74.74 0 0 1-.004-.468 9.96 9.96 0 0 1 2.355-3.89.832.832 0 0 1 .908-.178l1.495.631a1.536 1.536 0 0 0 1.332-.074c.2-.112.371-.267.498-.453s.206-.399.232-.62L7.038.925a.755.755 0 0 1 .2-.43.809.809 0 0 1 .422-.237C8.432.095 9.22.008 10.011 0Zm0 1.538c-.484.006-.968.046-1.446.12l-.118 1.003c-.053.46-.218.903-.483 1.291-.264.388-.619.711-1.037.943a3.195 3.195 0 0 1-2.776.15l-.96-.403a8.433 8.433 0 0 0-1.439 2.376l.852.602c.389.274.705.633.923 1.046a2.86 2.86 0 0 1 0 2.669 2.99 2.99 0 0 1-.922 1.047l-.854.603a8.445 8.445 0 0 0 1.44 2.382l.967-.408a3.191 3.191 0 0 1 2.77.15 3.03 3.03 0 0 1 1.037.94c.264.387.43.828.484 1.288l.116 1.01a8.99 8.99 0 0 0 2.871 0l.118-1.01c.053-.46.218-.902.482-1.29a3.03 3.03 0 0 1 1.036-.943 3.19 3.19 0 0 1 2.773-.149l.966.406a8.438 8.438 0 0 0 1.44-2.377l-.853-.603a2.988 2.988 0 0 1-.924-1.047 2.858 2.858 0 0 1 0-2.669c.218-.413.534-.772.923-1.046l.852-.602a8.436 8.436 0 0 0-1.44-2.377l-.958.403a3.193 3.193 0 0 1-2.777-.148 3.033 3.033 0 0 1-1.038-.944 2.884 2.884 0 0 1-.482-1.291l-.117-1.001a10.006 10.006 0 0 0-1.426-.12Zm-.013 4.616c1.063 0 2.082.405 2.833 1.127A3.77 3.77 0 0 1 14.004 10a3.77 3.77 0 0 1-1.173 2.719 4.091 4.091 0 0 1-2.833 1.127 4.091 4.091 0 0 1-2.832-1.127A3.77 3.77 0 0 1 5.993 10a3.77 3.77 0 0 1 1.173-2.72 4.091 4.091 0 0 1 2.832-1.126Zm0 1.539c-.637 0-1.248.243-1.699.675A2.262 2.262 0 0 0 7.595 10c0 .612.253 1.2.704 1.632.45.433 1.062.676 1.7.676.637 0 1.248-.243 1.699-.676.45-.433.704-1.02.704-1.632 0-.612-.253-1.199-.704-1.632a2.455 2.455 0 0 0-1.7-.675Z"})))},c=n(3918),u=n(1664),l=n.n(u),d=n(8262),g=n(3197),p=n(362),f=function(){var e=(0,g.IA)().data,t=(0,p.a)(),n=t.userInfo.userId,i=t.agentInfo.agentId;return(null==e?void 0:e.email)?"".concat("https://studio.oneai.com","/agents/").concat(i):"".concat("https://studio.oneai.com","/agents?agentId=").concat(i,"&userId=").concat(n)},h=function(e){var t=e.name,n=e.isChatActionButton,i=e.isMobile;e.id;var a=(0,p.a)(),o=a.isAgentMaker,u=a.userInfo.userId,g=a.agentInfo.orgId,h=f(),v=(0,d.useEventLogger)().eventLogger;if(u!==g||o)return null;var m=function(){v(c.V1.MANAGE_CLICKED)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{"data-cy":"manage_agent_button",onClick:m,target:"_blank",href:h,className:"".concat(i?"":"max-lg:hidden"," bg-blue rounded   ").concat(n?"w-full text-center px-6 whitespace-nowrap ".concat(i?"py-3 ":"py-2 "):"w-fit uppercase px-4 py-2"," !text-white font-mono md:text-sm text-[0.6rem] mobile:text-[0.7rem]"),children:t||"Manage Agent"}),n?null:(0,r.jsx)(l(),{onClick:m,target:"_blank",href:h,className:"lg:hidden h-9 w-9 hover:bg-lightText hover:bg-opacity-20 rounded-md cursor-pointer font-mono uppercase justify-center items-center flex text-white",children:(0,r.jsx)(s,{})})]})}},9927:function(e,t,n){n.r(t);var i=n(1010),r=n(4043),a=n(7582),o=n(5893),s=n(5557),c=n(2060),u=n(7211),l=n(3918),d=n(8682),g=n(7294),p=n(2134),f=n(8262),h=n(3197),v=n(362);t.default=function(e){var t,n=e.isMobile,m=e.dimensions,_=(0,c._3)().isReady,E=(0,r._)((0,g.useState)(!1),2),A=E[0],x=E[1],C=(0,r._)((0,g.useState)(!1),2),b=C[0],y=C[1],w=(0,h.aF)().data,I=(0,f.useEventLogger)().eventLogger,S=(0,p.Z)(),T=S.triggerConversationClickedEvent,N=S.triggerEmbedEvent,D=S.triggerEmbedToggleEvent,k=S.triggerOnShareAgentEvent,O=S.triggerOnShareEvent,L=S.triggerShareButtonsEvent,R=(0,v.a)(),j=R.chatScrollState,P=R.methods.setAgentInfo,M=R.agentInfo,G=R.agentInfo,U=G.chatId,F=G.publicName,B=G.shareId;if(!_)return null;var K=(t=(0,i._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:if(x(!0),B)return[2];return y(!0),[4,(0,u.I8)(F,U,(null==w?void 0:w.apiKey)||"")];case 1:return e=t.sent(),y(!1),P({shareId:e.share_id}),I(l.V1.SHARE_INTENT_CLICKED),[2]}})}),function(){return t.apply(this,arguments)});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{"aria-label":"share","data-cy":"share_button_in_header",onClick:K,className:"h-9 w-9 hover:bg-lightText ".concat(n?"hidden":""," \n        hover:bg-opacity-30 rounded-md cursor-pointer font-mono uppercase justify-center items-center flex text-white"),children:(0,o.jsx)(s.default,{className:"w-[16px] h-[19px] lg:w-[16px] lg:h-[16px] ".concat(m)})}),(0,o.jsx)(d.ShareDialog,{open:A,onClose:function(){return x(!1)},shareId:B,isLoading:b,agentInfo:M,chatScrollState:j,publicName:M.publicName,triggerConversationClickedEvent:T,triggerEmbedEvent:N,triggerEmbedToggleEvent:D,triggerOnShareAgentEvent:k,triggerOnShareEvent:O,triggerShareButtonsEvent:L})]})}},2060:function(e,t,n){n.d(t,{Bp:function(){return N},DG:function(){return I},I4:function(){return S},MI:function(){return y},_3:function(){return C},ld:function(){return T},t6:function(){return w},x:function(){return b},yN:function(){return x}});var i=n(1010),r=n(5766),a=n(2253),o=n(4043),s=n(8421),c=n(7582),u=n(1163),l=n(7294),d=n(1758),g=n(8262),p=n(3197),f=n(362),h=n(7211),v=n(9844),m=n(3918),_=n(9736),E=n(4862),A=n(3293),x=function(){return{revalidateStudioDocuments:function(){if((0,v.ai)())try{window.parent.postMessage({event:"DOCUMENTS_LIST_REVALIDATE"},"https://studio.oneai.com")}catch(e){}},revalidateStudioAgents:function(e,t){(0,v.ai)()&&(t?window.parent.postMessage({event:"AGENTS_LIST_SINGLE_REVALIDATION",data:e,publicName:t},"https://studio.oneai.com"):window.parent.postMessage({event:"AGENTS_LIST_REVALIDATE",data:e},"https://studio.oneai.com"))}}},C=function(){var e,t=(0,f.a)(),n=t.hints,r=t.pageAction,o=t.pageActionData,s=t.uploadData,u=t.alreadyAskedQuestions,l=t.isAtWidgetOrIframe,v=t.sampleQuestions,_=t.agentInfo,C=_.agentId,b=_.publicName,y=_.agentAccess,w=t.processingItems,I=t.methods,S=I.removeProcessingItems,T=I.insertToChatHistory,N=I.setAgentInfo,D=I.addProcessingItem,k=I.setUploadData,O=I.setTasksInProgress,L=(0,g.useEventLogger)().eventLogger,R=(0,p.aF)().data,j=x().revalidateStudioDocuments,P=(0,d.ZP)("agentmaker"!==b&&C?["getAgentActiveStatus",C,null==R?void 0:R.apiKey]:void 0,function(){return(0,h.uP)(C,y,null==R?void 0:R.apiKey)},{onSuccess:function(e){if(e){var t,i,a=(null==e?void 0:e.recent_completed_count)||0,c=null==e?void 0:e.failed_item_count;if(!(null==w?void 0:w.length)&&(null==e?void 0:e.recent_completed_count)&&D(Math.random().toString()),(null==M?void 0:M.active_status)==="in progress"&&"idle"===e.active_status&&a>0&&(null==w?void 0:w.length))B(e);else if((null==e?void 0:e.active_status)==="idle"&&(null==M?void 0:M.active_status)==="in progress"&&a>0&&a===c)F(s.type);else if((null==e?void 0:e.active_status)==="idle"&&(null==w?void 0:w.length)&&s.type){var l=new Date(s.timestamp);Math.floor((new Date().getTime()-l.getTime())/1e3)>=20&&F(s.type)}(null==M?void 0:M.in_progress_item_count)!==(null==e?void 0:e.in_progress_item_count)&&(null==e?void 0:e.in_progress_item_count)&&L(m.V1.PROGRESS_BAR_UPDATED,{value:null==e?void 0:e.recent_completed_count}),e&&"in progress"===e.active_status&&N({sampleQuestions:(0,E.y9)({sampleQuestions:null==e?void 0:e.sample_questions,isSuggestionsPage:"suggestions"===r,page:o||0,showRemaining:!0,hints:n}).filter(function(e){return!u.includes(e)})}),M&&!(null==M?void 0:null===(t=M.sample_questions)||void 0===t?void 0:t.length)&&(null==e?void 0:null===(i=e.sample_questions)||void 0===i?void 0:i.length)&&(L(m.V1.FIRST_SQ_SHOWN),(0,h.Iu)(C,b))}},refreshInterval:function(e){var t;return l&&(null==v?void 0:v.length)===0?5e3:(null==e?void 0:e.active_status)==="in progress"||(null==e?void 0:e.in_process_file_names)!==void 0&&(null==e?void 0:null===(t=e.in_process_file_names)||void 0===t?void 0:t.length)>0||(null==b?void 0:b.startsWith("-"))||(null==e?void 0:e.active_status)==="idle"&&(null==w?void 0:w.length)||(null==w?void 0:w.length)?1e3:0}}),M=P.data,G=P.error,U=P.mutate;null==M||M.recent_completed_count;var F=(e=(0,i._)(function(e){var t,n;return(0,c.Jh)(this,function(i){return T({finished:!0,id:0,speaker:E.kW,utterance:"FILE"===e?A.Cn:A.OE}),L(A.uE.DOCUMENT_FAIL,(0,a._)({},"URL"===s.type&&{doc_url:(null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.doc_url)||"",doc_id:(null==s?void 0:s.requestId)||"",failed_reason:"Could not fetch URL"},"FILE"===s.type&&{doc_id:(null==s?void 0:s.requestId)||"",file_type:(null==s?void 0:null===(n=s.data)||void 0===n?void 0:n.file_type)||"",failed_reason:"Could not fetch File"})),k({type:"",requestId:"",timestamp:"",data:{}}),S(),"TEMPORARY_AGENT"===b&&N({publicName:"agentmaker"}),[2]})}),function(t){return e.apply(this,arguments)}),B=function(e){var t,n,i,r,o="FILE"===s.type;T({finished:!1,id:0,speaker:E.kW,is_animated:!0,original_utterance:"I finished learning ".concat((null==e?void 0:e.recent_completed_count)||1," documents from your ").concat(o?"file":"site","! remember - you can manage my knowledge, personalize my look and behavior, add me to your website, and monitor what people are asking me in your [agent studio](").concat("https://studio.oneai.com",")"),utterance:""}),L(A.uE.MESSAGE_SHOWN_CONTENT_READY),L(A.uE.ADDED_CONTENT,(0,a._)({},"URL"===s.type&&{doc_url:(null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.doc_url)||"",doc_id:(null==s?void 0:s.requestId)||"",total_loading_time:(new Date().getTime()-new Date(s.timestamp).getTime())/1e3,insert_params:(0,a._)({},E.rz)},"FILE"===s.type&&{doc_id:(null==s?void 0:s.requestId)||"",file_type:(null==s?void 0:null===(n=s.data)||void 0===n?void 0:n.file_type)||"",doc_name:(null==s?void 0:null===(i=s.data)||void 0===i?void 0:i.file_name)||"",file_name:(null==s?void 0:null===(r=s.data)||void 0===r?void 0:r.file_name)||"",total_loading_time:(new Date().getTime()-new Date(s.timestamp).getTime())/1e3})),k({type:"",requestId:"",timestamp:"",data:{}}),L(m.V1.PROGRESS_BAR_DONE,{pages_count:e.recent_completed_count,total_loading_time:(new Date().getTime()-new Date(s.timestamp).getTime())/1e3}),O([]),j(),S()};return{data:M,error:G,mutate:U,isReady:"agentmaker"!==C}},b=function(){var e,t,n,s,g=(0,_.fP)(),v=g.getCookie,E=g.setCookie,x=(0,p.d0)().getLocalStorageAgents,C=(0,o._)((0,l.useState)(!0),2),b=C[0],y=C[1],w=(0,f.a)(),I=w.isAgentMaker,S=w.isWidget,T=w.userInfo.userId,N=w.ownsActiveAgent,D=w.agentInfo,k=D.agentAccess,O=D.starredCount,L=w.methods.setAgentInfo,R=(0,u.useRouter)(),j=T||v(A.F4),P="/[agentId]/[[...slug]]"===R.pathname,M=(e=(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,h.vf)({cookies:(0,r._)({},A.F4,v(A.F4)),mutate:!0})];case 1:return[2,e.sent()]}})}),function(){return e.apply(this,arguments)});(0,l.useEffect)(function(){y(!1)},[j]);var G=(0,d.ZP)(P?null:m.ch.HUB,M,{keepPreviousData:!0,revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnMount:!!j,revalidateOnReconnect:!1}),U=G.data,F=G.error,B=G.mutate,K=G.isLoading,H=(k===A.b8.public_write||N||I)&&!S,W=(t=(0,i._)(function(e){return(0,c.Jh)(this,function(t){return B((0,h.vf)({cookies:(0,r._)({},A.F4,e||v(A.F4)),mutate:!0}),{revalidate:!0}),[2]})}),function(e){return t.apply(this,arguments)}),V=(n=(0,i._)(function(e){var t;return(0,c.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];return(t={myAgents:[],recentAgents:[],starredAgents:[]}).myAgents.push(e),[4,B(t,{optimisticData:{},revalidate:!0,populateCache:!0})];case 1:return n.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),Y=(s=(0,i._)(function(e,t,n){var i,r;return(0,c.Jh)(this,function(o){switch(o.label){case 0:i=(0,a._)({},J),"insert"===n?(null===(r=i["".concat(t,"Agents")])||void 0===r||r.unshift(e),"starred"===t&&T&&L({starredCount:O+1})):"recent"===t?i.recentAgents=null==i?void 0:i.recentAgents.filter(function(t){return t.agent_id!==e.agent_id}):"starred"===t&&(i.starredAgents=null==i?void 0:i.starredAgents.filter(function(t){return t.agent_id!==e.agent_id}),T&&L({starredCount:O-1})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,B(i,{optimisticData:{},revalidate:!1,populateCache:!0})];case 2:return o.sent(),"delete"!==n&&W(),[3,4];case 3:return console.error("Error updating data:",o.sent()),B(U,!1),[3,4];case 4:return[2]}})}),function(e,t,n){return s.apply(this,arguments)}),J=j?{myAgents:(null==U?void 0:U.myAgents)||[],recentAgents:(null==U?void 0:U.recentAgents)||[],starredAgents:(null==U?void 0:U.starredAgents)||[]}:x();return(0,l.useEffect)(function(){var e;(null==J?void 0:null===(e=J.myAgents)||void 0===e?void 0:e.length)>0&&setTimeout(function(){if("true"!==v("first_agent_created")){E("first_agent_created","true");return}},2e3)},[J]),{data:J,error:F,mutateOptimistically:Y,optimisticallyAddAgent:V,revalidate:W,canAddData:H,isLoading:K||b,isLoadingRecent:"string"==typeof U&&"loading"===U}},y=function(){var e=(0,f.a)().methods.queryAgent;return{queryAgent:function(t,n,i,r){e(t,n,i,r)}}},w=function(){var e=(0,p.IA)().isAdmin,t=(0,f.a)().agentInfo.agentId;return(0,d.ZP)(e?["agentTimestamps",t]:null,(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,h.$I)(t)];case 1:return[2,e.sent()]}})}),{keepPreviousData:!0,revalidateOnFocus:!1})},I=function(){return(0,d.ZP)(("undefined"==typeof document?"undefined":(0,s._)(document))!=void 0?"agentVersion":null,(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,h.lo)()];case 1:return[2,e.sent()]}})}),{keepPreviousData:!0,revalidateOnFocus:!1})},S=function(){return(0,d.ZP)("hubCategoryNames",(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,h.ne)(void 0,!0)];case 1:return[2,e.sent()]}})}),{keepPreviousData:!0,revalidateOnFocus:!1,revalidateIfStale:!1})},T=function(e,t,n){var r,a=(0,o._)((0,l.useState)(0),2),s=a[0],u=a[1],p=(0,g.useEventLogger)().eventLogger,f=(r=(0,i._)(function(){var n,i,r;return(0,c.Jh)(this,function(a){switch(a.label){case 0:if(!t)return[2,[]];return r=(0,v.lA)(t),[4,(0,h.b7)(r,void 0,20)];case 1:return[2,null===(i=a.sent().agents)||void 0===i?void 0:null===(n=i[t])||void 0===n?void 0:n.agents.filter(function(t){var n,i,r,a;return(null==t?void 0:null===(i=t.display_name)||void 0===i?void 0:null===(n=i.toLowerCase())||void 0===n?void 0:n.includes(null==e?void 0:e.toLowerCase()))||(null==t?void 0:null===(a=t.public_name)||void 0===a?void 0:null===(r=a.toLowerCase())||void 0===r?void 0:r.includes(null==e?void 0:e.toLowerCase()))})]}})}),function(){return r.apply(this,arguments)});return(0,l.useEffect)(function(){t&&u(s+1)},[t]),(0,d.ZP)([m.ch.HUB_SEARCH_AGENTS,e,s],(0,i._)(function(){var n;return(0,c.Jh)(this,function(i){switch(i.label){case 0:if(!t)return[3,2];return[4,f()];case 1:return n=i.sent(),[3,4];case 2:return[4,(0,h.W4)(e)];case 3:n=i.sent(),i.label=4;case 4:return[2,n]}})}),{revalidateOnFocus:!1,onSuccess:function(t){e&&p(m.V1.SEARCH_AGENTS,{search_content:e,click_location:n?"agent":"hub",results:null==t?void 0:t.map(function(e){return e.public_name})})}})},N=function(e,t,n){var r,o=(0,d.ZP)(m.ch.HUB_CATEGORIES_LIST).data,s=(0,f.a)().userInfo.userId,u=(0,d.ZP)(m.ch.HUB_CATEGORIES,(0,i._)(function(){return(0,c.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,h.b7)(e,t,n)];case 1:return[2,i.sent()]}})}),{keepPreviousData:!1,revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1,revalidateOnMount:!1}),l=u.data,g=u.error,p=u.isLoading,_=u.mutate,E=(r=(0,i._)(function(e,t){var n;return(0,c.Jh)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),Object.keys(n=(0,a._)({},l)).forEach(function(i){var r,a;n[i].agents=null===(a=n[i])||void 0===a?void 0:null===(r=a.agents)||void 0===r?void 0:r.map(function(n){return n.agent_id===e.agent_id&&("star"===t?n.star_count++:n.star_count--),n})}),!s)return[2];return[4,_(n,{optimisticData:{},revalidate:!1,populateCache:!0})];case 1:return i.sent(),[3,3];case 2:return console.error("Error updating data:",i.sent()),_(l,!1),[3,3];case 3:return[2]}})}),function(e,t){return r.apply(this,arguments)});return{data:l?Object.entries(l):[],categories:o||[],getAgentTwoCategories:function(e){var t,n=null==e?void 0:null===(t=e.categories)||void 0===t?void 0:t.filter(function(e){return!["any","editor's pick"].includes(e)}).filter(v.el);return(null==n?void 0:n.length)?null==n?void 0:n.splice(0,2):[]},optimisticallyHubStarAgent:E,error:g,isLoading:p}}},7211:function(e,t,n){n.d(t,{lp:function(){return ec},uP:function(){return ei},h6:function(){return ee},OS:function(){return $},$I:function(){return Y},W4:function(){return z},lo:function(){return J},wA:function(){return V},vf:function(){return et},V:function(){return er},ne:function(){return q},b7:function(){return Q},Nk:function(){return W},is:function(){return ea},b3:function(){return eo},Yn:function(){return en},Iu:function(){return Z},fA:function(){return X},I8:function(){return es},qF:function(){return H},mi:function(){return eu}});var i,r,a,o,s,c,u,l,d,g,p,f,h,v,m,_,E,A,x,C,b,y=n(1010),w=n(2253),I=n(4932),S=n(4043),T=n(248),N=n(7582),D=n(5893),k=n(7294);function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var L=function(e){return k.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",width:15,height:16,fill:"none"},e),b||(b=k.createElement("path",{fill:"#AAA6B5",fillRule:"evenodd",d:"m2.376 7.316 5.307-5.307a.633.633 0 0 0 .059-.051 2.416 2.416 0 0 1 3.416 3.416.632.632 0 0 0-.056.064.623.623 0 0 0-.066.057l-5.192 5.192c-.432.432-1.028.403-1.334.097-.307-.307-.336-.902.096-1.334l5.571-5.57a.625.625 0 1 0-.884-.885l-5.57 5.571c-.847.846-.962 2.236-.097 3.102.865.865 2.255.75 3.101-.097L11.92 6.38a.63.63 0 0 0 .056-.064.636.636 0 0 0 .066-.057 3.666 3.666 0 0 0-5.16-5.209.63.63 0 0 0-.06.053l-5.33 5.33c-1.996 1.996-1.987 5.236.013 7.236s5.239 2.008 7.235.012l5.967-5.966a.625.625 0 0 0-.884-.884l-5.967 5.966a3.866 3.866 0 0 1-5.467-.012 3.866 3.866 0 0 1-.013-5.468Z",clipRule:"evenodd"})))},R=n(8262),j=n(3197),P=n(362),M=n(2060),G=n(3293),U=n(9844),F=n(3918),B=n(9736),K=n(4862),H=(i=(0,y._)(function(e,t,n){return(0,N.Jh)(this,function(i){if(!e)return[2];try{return[2,(0,B.C6)("".concat(B.T5,"/agents/").concat(t,"/").concat("STAR"===n?"star":"unstar"),{headers:{"api-key":e,"Content-Type":"application/json"}})]}catch(e){console.error("[getAgents] ",e)}return[2]})}),function(e,t,n){return i.apply(this,arguments)}),W=(r=(0,y._)(function(e,t,n){return(0,N.Jh)(this,function(i){try{return[2,(0,B.C6)("".concat(B.T5,"/").concat(e,"/document/").concat(t,"/section/").concat(n),{headers:{"Content-Type":"application/json"}})]}catch(e){return console.error("[getSectionData] ",e),[2,{display_name:"",document_type:"file",status:{state:"",details:{}},summary:"",text_content:"",segments:[{text_content:"",metadata:{}}]}]}return[2]})}),function(e,t,n){return r.apply(this,arguments)}),V=(a=(0,y._)(function(e,t){return(0,N.Jh)(this,function(n){try{return[2,(0,B.C6)("".concat(B.T5,"/").concat(e,"/document/").concat(t,"/"),{headers:{"Content-Type":"application/json"}})]}catch(e){return console.error("[getDocumentData] ",e),[2,{display_name:"",document_type:"file",status:{state:"",details:{}},summary:"",text_content:"",metadata:{publish_date:"",title:""},segments:[{text_content:"",metadata:{}}]}]}return[2]})}),function(e,t){return a.apply(this,arguments)});(0,y._)(function(e){return(0,N.Jh)(this,function(t){switch(t.label){case 0:if(!e)return[2,{isAdmin:!1}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,B.C6)("".concat(G.aY,"/~api/proxy/agent/is-admin?user_id=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}})];case 2:return[2,t.sent()];case 3:return t.sent(),[2,{isAdmin:!1}];case 4:return[2]}})});var Y=(o=(0,y._)(function(e){return(0,N.Jh)(this,function(t){switch(t.label){case 0:if(!e)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,B.C6)("/~api/proxy/agent/timestamps?agentId=".concat(e))];case 2:return[2,t.sent()];case 3:return t.sent(),[2,{created_date:"",last_update_time:""}];case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),J=(s=(0,y._)(function(){return(0,N.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,B.C6)("/~api/info")];case 1:return[2,e.sent()];case 2:return e.sent(),[2,{"backend-version":"unknown","frontend-version":"unknown"}];case 3:return[2]}})}),function(){return s.apply(this,arguments)}),Z=(c=(0,y._)(function(e,t,n){return(0,N.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Promise.allSettled([(0,B.C6)("/~api/cache",{method:"POST",body:{id:t,categories:n}}),(0,B.C6)("/~api/hub-cache",{method:"POST",body:{agentId:e}})])];case 1:return[2,i.sent()];case 2:return console.error("[/~api/cache] ",i.sent()),[2,{}];case 3:return[2]}})}),function(e,t,n){return c.apply(this,arguments)}),q=(u=(0,y._)(function(e,t){var n,i;return(0,N.Jh)(this,function(r){switch(r.label){case 0:n=new URL("/agent/v1/categories/list/all",B._n),r.label=1;case 1:if(r.trys.push([1,5,,6]),"hub"!==e)return[3,3];return n.searchParams.append("type","hub"),[4,(0,B.C6)(n.href)];case 2:return[2,r.sent()];case 3:return"categories"===e&&n.searchParams.append("include_category_description","true"),[4,(0,B.C6)(n.href)];case 4:if(i=r.sent(),"categories"===e)return[2,null==i?void 0:i.filter(function(e){return e.hub_eligible})];if(t)return[2,i.filter(function(e,t){return t<100})];return[2,i.filter(function(e,t){return t<28})];case 5:return console.error("[apiService getHubCategorieNames] ",r.sent()),[2,[]];case 6:return[2]}})}),function(e,t){return u.apply(this,arguments)}),z=(l=(0,y._)(function(e){var t;return(0,N.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];return(t=new URL("/agent/v1/agents/search",B._n)).searchParams.append("phrase",e),t.searchParams.append("number_of_agents","36"),[4,(0,B.C6)(t.href,void 0,6e4)];case 1:return[2,n.sent()]}})}),function(e){return l.apply(this,arguments)});(0,y._)(function(e){var t;return(0,N.Jh)(this,function(n){switch(n.label){case 0:return(t=new URL("/agent/v1/categories/metadata",B._n)).searchParams.append("categories_public_name",e),[4,(0,B.C6)(t.href)];case 1:return[2,n.sent()]}})});var Q=(d=(0,y._)(function(e,t,n,i,r){var a,o,s;return(0,N.Jh)(this,function(c){switch(c.label){case 0:if(a=[],o=new URL("/agent/v1/categories/list",B._n),!e)return[3,1];return o.searchParams.append("categories_public_name",e),[3,3];case 1:return[4,q(i,r)];case 2:(a=c.sent()).forEach(function(e){var t;(!r||e.hub_eligible)&&o.searchParams.append("categories_public_name",null==e?void 0:null===(t=e.public_name)||void 0===t?void 0:t.toLowerCase())}),c.label=3;case 3:return t&&o.searchParams.append("page",t.toString()),n&&o.searchParams.append("limit",n.toString()),[4,(0,B.C6)(o.href,void 0,12e4)];case 4:return s=c.sent(),[2,{categories:a,agents:s}]}})}),function(e,t,n,i,r){return d.apply(this,arguments)});(0,y._)(function(e,t){return(0,N.Jh)(this,function(n){switch(n.label){case 0:if(!t||!e)return[2,[]];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,B.C6)("".concat(B.T5,"/agents/").concat(e,"/chats/").concat(t,"/history"),{method:"GET",headers:{"Content-Type":"application/json"}})];case 2:return[2,n.sent()];case 3:return console.error("[fetchConversationByChatId] ",n.sent()),[2,[]];case 4:return[2]}})});var X=(g=(0,y._)(function(e,t,n,i,r,a){var o;return(0,N.Jh)(this,function(s){switch(s.label){case 0:if(!t)return[2];o={"Content-Type":"application/json"},a&&(o["api-key"]=a),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,B.C6)("".concat(B.T5,"/agents/").concat(e,"/chat/feedback"),{method:"POST",body:{chat_id:t,comment:n,feedback:i,agent_message_id:r},headers:o})];case 2:return[2,s.sent()];case 3:return console.error("[sendFeedback] ",s.sent()),[2,{}];case 4:return[2]}})}),function(e,t,n,i,r,a){return g.apply(this,arguments)}),$=(p=(0,y._)(function(e,t,n){var i,r,a;return(0,N.Jh)(this,function(o){switch(o.label){case 0:if(!e)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),r=new URL("".concat(B.T5,"/agents/").concat(e,"/chat/params")),n&&r.searchParams.append("debug","true"),a={},t&&(a.one_id=t,a["one-id"]=t,a["cache-control"]="no-cache"),console.debug("[getAgentChatParams] headers",a),[4,(0,B.C6)(r.href,{method:"POST",body:{},headers:(null===(i=Object.keys(a))||void 0===i?void 0:i.length)?a:void 0})];case 2:return[2,o.sent()];case 3:return console.error("[apiService getAgentChatParams] ",o.sent()),[3,4];case 4:return[2]}})}),function(e,t,n){return p.apply(this,arguments)}),ee=(f=(0,y._)(function(e){return(0,N.Jh)(this,function(t){switch(t.label){case 0:if(!e||"agentmaker"===e)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,B.C6)("".concat(B.T5,"/agent/").concat(e))];case 2:return[2,t.sent()];case 3:return console.error("[apiService getAgentByAgentId] ",t.sent()),[3,4];case 4:return[2]}})}),function(e){return f.apply(this,arguments)}),et=(h=(0,y._)(function(e){var t,n,i,r,a,o,s,c,u;return(0,N.Jh)(this,function(l){switch(l.label){case 0:if(!(t=null==e?void 0:e.cookies[G.F4]))return[2,{recentAgents:[],starredAgents:[],myAgents:[]}];n={headers:{"Content-Type":"application/json","cache-control":"no-cache"}},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all([fetch("".concat(G.aY,"/~api/proxy/agent/recent?org_id=").concat(t),n).then(function(e){return e.json()})])];case 2:return a=void 0===(r=(i=S._.apply(void 0,[l.sent(),1])[0]).recent_agents)?[]:r,s=void 0===(o=i.starred_agents)?[]:o,u=void 0===(c=i.my_agents)?[]:c,[2,{recentAgents:null==a?void 0:a.filter(function(e){return null==e?void 0:e.public_name}),starredAgents:null==s?void 0:s.filter(function(e){return null==e?void 0:e.public_name}),myAgents:null==u?void 0:u.filter(function(e){return null==e?void 0:e.public_name})}];case 3:return console.error("[apiService getFavoriteAndRecentAgents] ",l.sent()),[2,{recentAgents:[],starredAgents:[],myAgents:[]}];case 4:return[2]}})}),function(e){return h.apply(this,arguments)}),en=(v=(0,y._)(function(e,t,n){return(0,N.Jh)(this,function(i){switch(i.label){case 0:if(!e)return[2];return[4,fetch("".concat(B.T5,"/agents/").concat(e,"/free/settings"),{method:"POST",body:JSON.stringify({categories:n}),headers:{"api-key":t,"Content-Type":"application/json"}})];case 1:return[2,i.sent()]}})}),function(e,t,n){return v.apply(this,arguments)}),ei=(m=(0,y._)(function(e,t,n){return(0,N.Jh)(this,function(i){switch(i.label){case 0:if(!e)return[2];return[4,(0,B.C6)("".concat(B.T5,"/agents/").concat(e,"/active_status"),{headers:(0,w._)({},t===G.b8.private&&{"api-key":n})})];case 1:return[2,i.sent().active_status]}})}),function(e,t,n){return m.apply(this,arguments)}),er=(_=(0,y._)(function(e){return(0,N.Jh)(this,function(t){switch(t.label){case 0:if(!e)return[2,""];t.label=1;case 1:return t.trys.push([1,4,,5]),[4,(0,B.a8)("".concat(G.aY,"/~api/proxy/agent/fetch-user?org_id=").concat(e),{method:"GET",headers:{"Content-Type":"application/json","cache-control":"no-cache"}})];case 2:return[4,t.sent().json()];case 3:return[2,t.sent()];case 4:return console.error("[getFirebaseUser] ",t.sent()),[2,""];case 5:return[2]}})}),function(e){return _.apply(this,arguments)}),ea=(E=(0,y._)(function(e,t){return(0,N.Jh)(this,function(n){switch(n.label){case 0:if(!e||t)return[2,{apiKey:"",isAnonymous:!1,orgId:""}];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,(0,B.a8)("".concat(G.aY,"/~api/proxy/studio-key/").concat(e),{method:"GET",headers:{"Content-Type":"application/json","cache-control":"no-cache"}})];case 2:return[4,n.sent().json()];case 3:return[2,n.sent()||""];case 4:return console.error("[getUserData] ",n.sent()),[2,{apiKey:"",orgId:"",isAnonymous:!1}];case 5:return[2]}})}),function(e,t){return E.apply(this,arguments)});(0,y._)(function(e,t){return(0,N.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,B.a8)("".concat(B.T5,"/agents/").concat(e,"/chats/last/history"),{method:"GET",headers:{one_id:t,"one-id":t,"Content-Type":"application/json"}})];case 1:return[2,n.sent()]}})}),(0,y._)(function(e,t){return(0,N.Jh)(this,function(n){switch(n.label){case 0:return console.debug("[getPublicAgentByPublicName] ",e),[4,(0,B.C6)("".concat(B.T5,"/agents/").concat(e),{method:"GET",headers:{"api-key":t||"","Content-Type":"application/json","cache-control":"no-cache"}})];case 1:return[2,n.sent()]}})});var eo=(A=(0,y._)(function(e,t,n,i,r,a){return(0,N.Jh)(this,function(o){switch(o.label){case 0:if(!i||e===t)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,B.C6)("".concat(G.aY,"/~api/proxy/agent/merge-user"),{method:"POST",body:{oldUserId:e,newUserId:t,isAnonymous:n,recentAgents:r,starredAgents:a},headers:{"Content-Type":"application/json","cache-control":"no-cache"}})];case 2:return[2,o.sent()];case 3:return console.error("[mergeUser] ",o.sent()),[2,{result:"error"}];case 4:return[2]}})}),function(e,t,n,i,r,a){return A.apply(this,arguments)});(0,y._)(function(e){var t;return(0,N.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,B.C6)("".concat(B.T5,"/shared_chat/").concat(e),{method:"GET"})];case 1:return console.debug("[getSharedChatHistory] ",t=n.sent()),[2,t]}})});var es=(x=(0,y._)(function(e,t,n){var i;return(0,N.Jh)(this,function(n){switch(n.label){case 0:if(!e||!t)return[2,Promise.resolve({share_id:"",status:"ERROR"})];return[4,(0,B.C6)("".concat(B.T5,"/agents/").concat(e,"/chats/").concat(t,"/share"),{})];case 1:return console.debug("[shareChat] ",i=n.sent()),[2,i]}})}),function(e,t,n){return x.apply(this,arguments)}),ec=(C=(0,y._)(function(e,t){var n;return(0,N.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,B.C6)("".concat(B.T5,"/tasks/").concat(e,"/abort"),{method:"GET",headers:t?{"api-key":t}:{}})];case 1:return console.debug("[abortInProgress] ",n=i.sent()),[2,n]}})}),function(e,t){return C.apply(this,arguments)}),eu=function(){var e,t,n,i,r,a,o,s,c,u,l,d=(0,P.a)(),g=d.chatHistory,p=d.touchedAgentMakerBox,f=d.userInfo,h=f.userId,v=f.apiKey,m=f.isTemporaryUser,_=d.agentInfo,E=d.isAgentMaker,A=d.tasksInProgress,x=d.agentInfo,C=x.agentId,b=x.displayName,S=x.orgId,k=x.publicName,O=d.methods,W=O.setAgentInfo,V=O.setInsertMode,Y=O.insertToChatHistory,J=O.addProcessingItem,q=O.setUserInfo,z=O.setIsCreatingAgent,Q=O.setUploadData,X=O.setJustCreatedAgent,$=O.setStoppedCurrentUpload,ee=O.setTasksInProgress,et=(0,M.x)(),en=et.mutateOptimistically,ei=et.revalidate,er=et.data,ea=et.canAddData,eo=(0,j.aF)().data,es=(0,B.fP)(),ec=es.getCookie,eu=es.deleteCookie,el=es.setCookie,ed=(0,j.d0)(),eg=ed.getLocalStorageAgents,ep=ed.createAnonymousUser,ef=ed.saveAgentInLocalStorage,eh=(0,R.useEventLogger)().eventLogger,ev=(null==eo?void 0:eo.apiKey)||v||void 0,em=(e=(0,y._)(function(){var e,t,n,i;return(0,N.Jh)(this,function(r){switch(r.label){case 0:if(e="",t=ec(G.F4),z(!0),!t)return[3,8];if(!(m||v))return[3,1];return ev=v||"",[3,7];case 1:return[4,(0,B.a8)("".concat(G.aY,"/~api/proxy/studio-key/").concat(t),{method:"GET",headers:{"Content-Type":"application/json","cache-control":"no-cache"}})];case 2:if(404!==(n=r.sent()).status)return[3,4];return eu(G.F4),eu(G.b6),[4,em()];case 3:return[2,r.sent()];case 4:return[4,n.json()];case 5:return[4,r.sent().apiKey];case 6:ev=r.sent(),r.label=7;case 7:return[3,9];case 8:ev=void 0,r.label=9;case 9:return V(!1),"true"!==ec("first_agent_created")&&(eh(F.V1.FIRST_CREATE_COMPLETED),el("first_agent_created","true")),[4,(0,B.a8)("".concat(B.T5,"/create"),{method:"POST",body:JSON.stringify({display_name:e,agent_access:h&&eo?G.b8.public_read:G.b8.public_write,created_by:"agentmaker"}),headers:(0,w._)({},ev&&{"api-key":ev||""})})];case 10:return[4,r.sent().json()];case 11:return i=r.sent(),t||(q({isTemporaryUser:!0,temporaryUserId:i.org_id}),ep(i)),z(!1),[2,(0,I._)((0,w._)({},i),{displayName:e,apiKey:ev||i.api_key,agentId:i.agent_id})]}})}),function(){return e.apply(this,arguments)}),e_=(t=(0,y._)(function(e,t,n,i,r){return(0,N.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,3,,4]),S!==_.orgId)return[2,new Promise(function(e){e({success:!1,message:"You do not have permission to edit this agent.",suggestions:[]})})];return[4,(0,B.a8)("".concat(G.aY,"/~api/proxy/agent/edit"),{method:"POST",body:JSON.stringify({public_name:e,display_name:t,agent_id:C,org_id:S||h||ec(G.F4),old_public_name:k,categories:i,show_in_hub:r,avatar:n}),headers:{"Content-Type":"application/json","cache-control":"no-cache"}})];case 1:return[4,a.sent().json()];case 2:return[2,a.sent()];case 3:return console.error("[apiService mutateAgent]",a.sent()),[2,new Promise(function(e){e({success:!1,message:"Something went wrong. Please try again later.",suggestions:[]})})];case 4:return[2]}})}),function(e,n,i,r,a){return t.apply(this,arguments)});(0,y._)(function(){return(0,N.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,B.C6)("".concat(B.T5,"/create"),{method:"POST",body:{display_name:"anonymous user agent",is_public:!0}})];case 1:return[2,e.sent()]}})});var eE=(n=(0,y._)(function(e){var t,n;return(0,N.Jh)(this,function(i){return(t=!!h,n={agentId:e.agent_id,publicName:"TEMPORARY_AGENT",apiKey:ev,ownsActiveAgent:!0,agentAccess:t?G.b8.public_read:G.b8.public_write,orgId:e.org_id,claimed:!0},t)?(q({userId:h}),W(n),ei(),[2,{agent:n,apiKey:e.api_key}]):(el(G.F4,e.org_id),ev=null==e?void 0:e.api_key,W(n),q({userId:e.org_id,apiKey:e.api_key,orgId:e.org_id}),ei(),[2,{agent:n,newAgentsList:eg,apiKey:e.api_key}])})}),function(e){return n.apply(this,arguments)}),eA=(i=(0,y._)(function(e){var t,n,i,r,a,o,s,c;return(0,N.Jh)(this,function(u){switch(u.label){case 0:if(n=er.myAgents,i="",r="",a="","agentmaker"!==k)return[3,3];return o=new Date().getTime().toString(),window.localStorage.setItem("createAgentStartTime",o),[4,em()];case 1:return[4,eE(u.sent())];case 2:return t=(s=u.sent()).agent,n=s.newAgentsList,i=s.agent.orgId||"",r=s.agent.agentId,a=s.apiKey,X(!0),Y({finished:!1,id:0,speaker:"agentmaker",utterance:"",is_animated:!0,original_utterance:"Got it!\nAnalyzing <i>`".concat(e,"`</i>..."),initial_delay:0}),[3,4];case 3:t=null==n?void 0:n.find(function(e){return(null==e?void 0:e.public_name)===k}),i=S||"",t||(t=null===(c=eg())||void 0===c?void 0:c.myAgents.find(function(e){return(null==e?void 0:e.agent_id)===C})),h||(a="ANONYMOUS",i="ANONYMOUS"),u.label=4;case 4:return[2,{safeAgentId:(null==t?void 0:t.agent_id)||C,displayName:(null==t?void 0:t.display_name)||b,publicName:(null==t?void 0:t.public_name)||k,agentAccess:(null==t?void 0:t.agent_access)||G.b8.private,orgId:i,agentsList:n,agentId:r||C,apiKey:a||ev}]}})}),function(e){return i.apply(this,arguments)}),ex=(r=(0,y._)(function(e){var t,n,i,r,a,o,s,c,u,l,d,f,h;return(0,N.Jh)(this,function(v){switch(v.label){case 0:if(t=e.file,n=e.fileName,i=e.contentType,r=e.type,Y({finished:!0,id:0,speaker:"user",utterance:n,component:(0,D.jsx)(L,{})}),$(!1),a=(0,U.mD)(n),!U.gz.includes(a))return Y({finished:!0,id:0,speaker:K.kW,utterance:"We only support PDF, TXT and DOCX files at the moment."}),[2];return[4,eA(n)];case 1:return s=(o=v.sent()).agentId,c=o.apiKey,[4,eS()];case 2:if(!v.sent())return[2];return Q(function(e){return(0,I._)((0,w._)({},e),{timestamp:new Date().toISOString(),type:"FILE",data:{file_name:n,file_type:t.type}})}),(u=new FormData).append("file",t),l={file_name:n,content_type:i},d={project:"somte-test-proj",metadata:{},item_types:[],agent_id:s,content_items:[{triggers:[],content:"",params:(0,w._)({},l),type:"file"}]},[4,fetch("".concat(B.T5,"/agents/").concat(s,"/insert/file/async?upload=").concat(encodeURIComponent(JSON.stringify(d))),{method:"POST",body:u,headers:(0,w._)({"Content-Type":"multipart/form-data"},c&&{"api-key":c})})];case 3:return[4,v.sent().json()];case 4:if((null==(f=v.sent())?void 0:f.status_code)===G.G$.AGENT_PAGES_QUOTA_EXCEEDED)return Y({finished:!0,id:0,speaker:b,utterance:U.Ib}),Q({type:"",requestId:"",timestamp:"",data:{}}),[2];return J(Math.random().toString()),eT(b,n),(null==f?void 0:f.task_id)&&(ee((0,T._)(A).concat([f.task_id])),Q(function(e){return(0,I._)((0,w._)({},e),{requestId:f.task_id||""})}),eh("drag"===r?F.V1.UPLOAD_FILE_DRAG:F.V1.UPLOAD_FILE,{content_type:"FILE",file_name:t.name,file_type:t.type,doc_id:(null==f?void 0:f.task_id)||"",document_id:(null==f?void 0:f.task_id)||"",doc_url:""}),E&&eh(G.uE.MESSAGE_SHOWN_CREATING_AGENT),eh(G.uE.MESSAGE_SHOWN_ADDING_CONTENT),p?eh(F.V1.UPLOAD_URL_FIRST_MAKER_MESSAGE,{agent_message_content:(0,U.jl)(g),user_message_content:null==t?void 0:t.name,file_type:null==t?void 0:t.type,doc_id:null==f?void 0:f.task_id,doc_name:null==t?void 0:t.name}):eh(F.V1.UPLOAD_URL_MESSAGE,{file_type:null==t?void 0:t.type,doc_id:null==f?void 0:f.task_id,doc_name:null==t?void 0:t.name}),E&&(h=new Date().getTime().toString(),window.localStorage.setItem("pageStartLoading",h),eh(F.V1.AGENT_PAGE_START_LOADING))),[2,f]}})}),function(e){return r.apply(this,arguments)}),eC=(a=(0,y._)(function(e){var t,n,i,r,a,o,s;return(0,N.Jh)(this,function(c){switch(c.label){case 0:return[4,eA(t=e.url)];case 1:return i=(n=c.sent()).agentId,r=n.apiKey,$(!1),[4,eS()];case 2:if(a=c.sent(),J(Math.random().toString()),!a)return[2];return Q(function(e){return(0,I._)((0,w._)({},e),{timestamp:new Date().toISOString(),type:"URL",data:{doc_url:t}})}),[4,(0,B.C6)("".concat(B.T5,"/agents/").concat(i,"/insert/async"),{method:"POST",body:{agent_id:i,content_items:[{triggers:[],content:t,params:(0,w._)({},K.rz),type:"url"}],project:"string",metadata:{},item_types:[]},headers:(0,w._)({},r&&{"api-key":r})})];case 3:if((null==(o=c.sent())?void 0:o.status_code)===G.G$.AGENT_PAGES_QUOTA_EXCEEDED)return Y({finished:!0,id:0,speaker:b,utterance:U.Ib}),Q({type:"",requestId:"",timestamp:"",data:{}}),[2];return eT(b,t),(null==o?void 0:o.task_id)&&Q(function(e){return(0,I._)((0,w._)({},e),{requestId:(null==o?void 0:o.task_id)||""})}),E&&eh(G.uE.MESSAGE_SHOWN_CREATING_AGENT),eh(G.uE.MESSAGE_SHOWN_ADDING_CONTENT),p?eh(F.V1.UPLOAD_URL_FIRST_MAKER_MESSAGE,{agent_message_content:(0,U.jl)(g),user_message_content:t,doc_id:null==o?void 0:o.task_id,doc_url:t}):eh(F.V1.UPLOAD_URL_MESSAGE,{user_message_content:t,doc_id:null==o?void 0:o.task_id,doc_url:t}),E&&(s=new Date().getTime().toString(),window.localStorage.setItem("pageStartLoading",s),eh(F.V1.AGENT_PAGE_START_LOADING)),[2,o]}})}),function(e){return a.apply(this,arguments)}),eb=(o=(0,y._)(function(e){var t,n;return(0,N.Jh)(this,function(i){switch(i.label){case 0:if(t=ec(G.F4),q({isAnonymous:!1}),!t)return ef(_,U.uR.MY_AGENTS_RECENTS),[2];if(!e||"agentmaker"===e)return[2];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch("".concat(G.aY,"/~api/proxy/agent/recent?org_id=").concat(t),{method:"POST",body:JSON.stringify({agent_id:e}),headers:{"Content-Type":"application/json","cache-control":"no-cache"}})];case 2:return[4,i.sent().json()];case 3:return n=i.sent(),ei(),[2,n];case 4:return console.error("[addRecentAgent] ",i.sent()),[3,5];case 5:return[2]}})}),function(e){return o.apply(this,arguments)}),ey=(s=(0,y._)(function(e){return(0,N.Jh)(this,function(t){switch(t.label){case 0:return h||ef(e,U.uR.MY_AGENTS_FAVORITES),en(e,"starred","insert"),[4,H(ev,C,"STAR")];case 1:return t.sent(),Z(e.agent_id,e.public_name),[2]}})}),function(e){return s.apply(this,arguments)}),ew=(c=(0,y._)(function(e){return(0,N.Jh)(this,function(t){return en(e,"recent","delete"),[2]})}),function(e){return c.apply(this,arguments)}),eI=(u=(0,y._)(function(e){return(0,N.Jh)(this,function(t){switch(t.label){case 0:return h||ef(e,U.uR.MY_AGENTS_FAVORITES),en(e,"starred","delete"),[4,H(ev,C,"UNSTAR")];case 1:return t.sent(),Z(e.agent_id,e.public_name),[2]}})}),function(e){return u.apply(this,arguments)}),eS=(l=(0,y._)(function(){return(0,N.Jh)(this,function(e){return ea?[2,!0]:(Y({finished:!0,id:0,speaker:b,utterance:'You don\'t have permission to add documents to this agent. <a href="/~agentmaker">Create a new agent</a>'}),[2,!1])})}),function(){return l.apply(this,arguments)}),eT=function(e,t){var n=E||e.startsWith("-")?"agentmaker":e,i="I am creating an agent for you... One moment please...",r=4e3;E||(i="Adding <i>`".concat(t,"`</i> to my knowledge..."),r=0),setTimeout(function(){Y({finished:!1,id:0,is_animated:!0,initial_delay:r,speaker:n,utterance:"",original_utterance:i})},2e3)};return{addAgentURL:eC,addAgentFile:ex,addRecentAgent:eb,addStarredAgent:ey,mutateAgent:e_,deleteAgentFromRecent:ew,deleteAgentFromStarred:eI}}},9844:function(e,t,n){n.d(t,{$$:function(){return m},Av:function(){return F},Cc:function(){return L},FP:function(){return w},HL:function(){return B},Ib:function(){return A},JP:function(){return K},L8:function(){return x},My:function(){return I},Ts:function(){return U},Uo:function(){return R},Ye:function(){return k},__:function(){return C},_h:function(){return M},aN:function(){return N},ai:function(){return O},el:function(){return D},fD:function(){return E},gz:function(){return y},jl:function(){return P},k$:function(){return S},lA:function(){return T},mD:function(){return b},mQ:function(){return v},nC:function(){return j},ou:function(){return h},q9:function(){return G},tg:function(){return _},uR:function(){return a}});var i,r,a,o=n(1010),s=n(5766),c=n(2253),u=n(4043),l=n(7582),d=n(5e3);n(7211);var g=n(2496),p=n(3293),f=n(3918);(i=a||(a={})).MY_AGENTS="myAgents",i.MY_AGENTS_RECENTS="recentAgents",i.MY_AGENTS_FAVORITES="starredAgents";var h=function(e,t){if(!(null==e?void 0:e.edited_at)||!(null==t?void 0:t.edited_at))return 0;var n=new Date(null==e?void 0:e.edited_at);return new Date(null==t?void 0:t.edited_at).getTime()-n.getTime()},v=function(e){return/^(https?:\/\/)?([a-z0-9-]+\.)+[a-z]{2,4}(\S*)$/i.test(e)},m=function(e,t,n){var i,r;return((null==n?void 0:null===(i=n.find(function(t){return t.name===e[0]}))||void 0===i?void 0:i.priority)||1/0)-((null==n?void 0:null===(r=n.find(function(e){return e.name===t[0]}))||void 0===r?void 0:r.priority)||1/0)},_=function(e,t,n){return new Promise(function(i){var r=new Image;r.src=e,r.onload=function(){var e=r.width,a=r.height;if(e>t||a>n){var o=e/a;e>a?(e=t,a=t/o):(a=n,e=n*o)}var s=document.createElement("canvas");s.width=e,s.height=a,s.getContext("2d").drawImage(r,0,0,e,a),s.toBlob(function(){var e=new FileReader;e.onloadend=function(){i(e.result)},s.toBlob(function(t){e.readAsDataURL(t)})},"image/jpeg",.8)}})},E=(r=(0,o._)(function(e){return(0,l.Jh)(this,function(t){return[2,new Promise(function(t,n){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){var e=i.result;"string"==typeof e?t(e):n(Error("Unable to read file as base64"))},i.onerror=function(e){n(e)}})]})}),function(e){return r.apply(this,arguments)}),A="You've reached max number of documents limit. Please <a href=\"".concat("".concat("https://studio.oneai.com","/settings/billing"),'">upgrade your plan</a> or try a shorter document'),x=function(e){var t=e.cookies;return{agentInfo:{agentId:"agentmaker",displayName:"AgentMaker",agentAccess:p.b8.private,publicName:"agentmaker",hubEligible:!1,cycleSuggestedQuestions:!0,orgId:"",ownsActiveAgent:!1,claimed:!1,sampleQuestions:[],configuration:{welcomeMessage:"",profileMessage:"",showInHub:!1,categories:[],showCreateAgentLink:!1,showOneAiBranding:!1,widget:(0,p.av)(),disableFactCheck:!1,allowOriginalFileAccess:!0},avatar:"",chatId:null,shareId:null,starredCount:0,messageCount:0},tasksInProgress:[],widgetParentTitle:"",refs:{input:null},isParamsReady:!0,hints:[],uploadData:{timestamp:"",type:"",requestId:"",data:{}},totalMessages:0,showActionButtons:!1,isCreatingAgent:!1,questionsPage:0,ownsActiveAgent:!1,userInfo:{userId:(null==t?void 0:t[p.F4])||"",orgId:(null==t?void 0:t[p.b6])||"",isAnonymous:!(null==t?void 0:t[p.F4])&&(null==t?void 0:t[p.qf])!=="false",isTemporaryUser:(null==t?void 0:t[p.xu])==="true",apiKey:(null==t?void 0:t[p.XR])||"",temporaryUserId:(null==t?void 0:t[p.x2])||"",acceptedTerms:(null==t?void 0:t[p.y7])==="true",geoLocation:{}},chatHistory:[{finished:!0,id:0,speaker:"agentmaker",utterance:"",original_utterance:""}],isAtWidgetOrIframe:!1,isShare:!1,sampleQuestions:[],insertMode:!1,isAgentMaker:!0,shouldLogout:!1,isOnline:!0,fallback:{},seo:{title:"AgentMaker by OneAI",description:"OneAI"},stoppedCurrentUpload:!1,pageAction:"hub",pageActionData:"",message:"",alreadyAskedQuestions:[]}},C=function(e){return e.split(/(\W+)/).map(function(e){if(e.match(/[a-zA-Z]+/)){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}return e}).join("")},b=function(e){try{return".".concat(e.split(".").pop())}catch(e){return console.debug("[getFileExtension] error:",e),""}},y=Object.values(d.ALLOWED_EXTENSIONS).flatMap(function(e){return e}).join(", "),w=function(e){return"application/pdf"===e?"text/pdf":"application/epub+zip"===e?"text/epub":"application/msword"===e?"text/doc":"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e?"text/docx":"application/vnd.openxmlformats-officedocument.presentationml.presentation"===e?"text/pptx":e},I=function(e){var t=Math.max(Number(e),0);return t?t>=1e9?String(Math.floor(t/1e9)+"B"):t>=1e6&&t<1e9?String(Math.floor(t/1e6)+"M"):t>=1e3&&t<1e6?String(Math.floor(t/1e3)+"K"):t:"0"},S=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})},T=function(e){var t=e.toLowerCase();return((t=(t=(t=(t=t.replace(/ /g,"-")).replace(/&/g,"-and-")).replace(/-{2,}/g,"-")).replace(/'/g,"")).match(/[a-zA-Z0-9_-]+/g)||[]).join("")},N=function(e){if(!("publicName"in e))return e;var t,n,i=new Date().toISOString();return{agent_id:(null==e?void 0:e.agentId)||"",display_name:(null==e?void 0:e.displayName)||"",public_name:(null==e?void 0:e.publicName)||"",agent_access:(null==e?void 0:e.agentAccess)||"",message_count:(null==e?void 0:e.messageCount)||0,edited_at:i,star_count:(null==e?void 0:e.starredCount)||0,avatar:(null==e?void 0:null===(n=e.configuration)||void 0===n?void 0:null===(t=n.widget)||void 0===t?void 0:t.avatar)||""}},D=function(e,t,n){return n.indexOf(e)===t},k=function(e){return e.substring(0,10).split("-").reverse().join("/")},O=function(){try{var e=window.location!==window.parent.location?document.referrer:document.location.href,t=null==e?void 0:e.substring(0,(null==e?void 0:e.length)-1);if("https://studio.oneai.com"===t)return!0;return!1}catch(e){return!1}};(0,o._)(function(e,t,n,i){var r,a,o,c,d;return(0,l.Jh)(this,function(l){return r=Object.fromEntries(Object.entries(n).map(function(e){var n=(0,u._)(e,2);return[n[0],{agents:n[1].map(function(e){return t[e]})}]})),a=i.filter(function(e){var t,n;return!!(null===(n=r[e.category])||void 0===n?void 0:null===(t=n.agents)||void 0===t?void 0:t.length)}),o=Object.fromEntries(i.slice((parseInt(e)-1)*10,(parseInt(e)-1)*10+10).filter(function(e){return!!r[e.category]}).map(function(e){var t=e.category;return[t,r[t]]})),c=new Date().toISOString(),[2,{props:{fallback:(d={},(0,s._)(d,f.ch.HUB_CATEGORIES,o),(0,s._)(d,f.ch.HUB_CATEGORIES_LIST,a),d),pageNumber:parseInt(e),totalPages:Math.ceil(i.length/10),revalidationTime:c},revalidate:1}]})});var L=function(e){var t,n=e.overrides,i=e.widget,r=(0,c._)({},i,n);(null==n?void 0:n.desktop_type)&&(r.desktop.widget_type=n.desktop_type),(null==n?void 0:n.mobile_type)&&(r.mobile.widget_type=n.mobile_type),(null==n?void 0:n.desktop_location)&&(r.desktop.location=n.desktop_location),(null==n?void 0:n.mobile_location)&&(r.mobile.location=n.mobile_location),(null==n?void 0:n.color)&&(r.primary_color=function(e){if(!e)return"";var t=e.replace(/^#/,""),n=parseInt(t.substring(0,2),16),i=parseInt(t.substring(2,4),16),r=parseInt(t.substring(4,6),16);return"".concat(n,", ").concat(i,", ").concat(r)}("#".concat(n.color))),(null==n?void 0:n.justChat)&&(r.justChat="true"===n.justChat);var a=null==r?void 0:r.bottom_widget;return"object"==typeof a&&a&&(null===(t=Object)||void 0===t||t.keys(a).forEach(function(e){null==r.bottom_widget[e]&&(r.bottom_widget[e]=p.iP[e])})),null!==a&&a||(r.bottom_widget=p.iP),r},R="GPT Agent for Any Website or Topic | OneAI",j="Chat with AI Agents that have learned the content of specific businesses or topics, and respond solely based on it.",P=function(e){var t=e.find(function(e){return"chat-input"===e.component});return(null==t?void 0:t.utterance)||""},M=function(){try{return window.self!==window.top}catch(e){return!1}},G=640,U=4200,F=600,B=600,K=function(e){return H(e,(0,g.$h)().isDark)},H=function(e,t){var n=(100-(null==e?void 0:e.background_transparency))/100;return"rgba(".concat(t?"25, 25, 25":"166, 166, 166",", ").concat(n,")")}},3918:function(e,t,n){n.d(t,{Rf:function(){return d},V1:function(){return u},ch:function(){return o},nH:function(){return s}}),(i=o||(o={})).HUB="~HUB",i.HUB_CATEGORIES="~HUB_CATEGORIES",i.HUB_CATEGORIES_LIST="~HUB_CATEGORIES_LIST",i.HUB_PAGE_DATA="~HUB_PAGE_DATA",i.HUB_SEARCH_AGENTS="~HUB_SEARCH_AGENTS",i.ACTIVE_AGENT="~ACTIVE_AGENT",i.USER="~USER",(s||(s={})).RESET_CHAT="RESET_CHAT",(c||(c={})).PRIVATE_AGENT="PRIVATE_AGENT",(r=u||(u={})).USER_CREATED="USER_CREATED",r.PAGE_VISITED="PAGE_VISITED",r.SENT_MESSAGE="SENT_MESSAGE",r.RECEIVED_RESPONSE="RECEIVED_RESPONSE",r.CREATE_AGENT_CLICKED="CREATE_AGENT_CLICKED",r.CREATE_AGENT_BUTTON_CLICKED="CREATE_AGENT_BUTTON_CLICKED",r.RESPONSE_COPIED="RESPONSE_COPIED",r.CLICKED_SHARE="CLICKED_SHARE",r.CLICKED_EMBED="CLICKED_EMBED",r.EMBED_SUCCESS="EMBED_SUCCESS",r.PRICING_CLICKED="PRICING_CLICKED",r.CLICKED_CONTACT_SALES="CLICKED_CONTACT_SALES",r.STARRED_AGENT="STARRED_AGENT",r.UNSTARRED_AGENT="UNSTARRED_AGENT",r.EDITED_AGENT_PROFILE="EDITED_AGENT_PROFILE",r.CLICKED_CLAIM_AGENT="CLICKED_CLAIM_AGENT",r.REGISTERED="REGISTERED",r.ERROR="ERROR",r.AGENT_MAKER_START_LOADING="AGENT_MAKER_START_LOADING",r.UPLOAD_FILE_HOVERED="UPLOAD_FILE_HOVERED",r.UPLOAD_FILE_TAPPED="UPLOAD_FILE_TAPPED",r.UPLOAD_FILE_CLICKED="UPLOAD_FILE_CLICKED",r.UPLOAD_FILE="UPLOAD_FILE",r.QUERY_MADE="QUERY_MADE",r.PROGRESS_BAR_SHOWN="PROGRESS_BAR_SHOWN",r.PROGRESS_BAR_DONE="PROGRESS_BAR_DONE",r.UPLOAD_STOP_CLICKED="UPLOAD_STOP_CLICKED",r.AGENT_CREATED="AGENT_CREATED",r.INCLUDE_CONVERSATION_CLICKED="INCLUDE_CONVERSATION_CLICKED",r.AVATAR_CLICKED="AVATAR_CLICKED",r.MANAGE_CLICKED="MANAGE_CLICKED",r.ALL_SETTINGS_CLICKED="ALL_SETTINGS_CLICKED",r.HIDE_FROM_HUB="HIDE_FROM_HUB",r.BACK_TO_CHAT_CLICKED="BACK_TO_CHAT_CLICKED",r.ONEAI_CLICKED="ONEAI_CLICKED",r.READ_PROFILE_CLICKED="READ_PROFILE_CLICKED",r.HUB_CLICKED="HUB_CLICKED",r.RECENT_HOVERED="RECENT_HOVERED",r.SEARCH_AGENTS="SEARCH_AGENTS",r.SEARCH_RESULTS="SEARCH_RESULTS",r.RECENT_TAB_CLICKED="RECENT_TAB_CLICKED",r.FAVORITES_TAB_CLICKED="FAVORITES_TAB_CLICKED",r.FAVORITES_CLICKED="FAVORITES_CLICKED",r.MY_AGENTS_TAB_CLICKED="MY_AGENTS_TAB_CLICKED",r.SHOW_MORE_CLICKED="SHOW_MORE_CLICKED",r.SHOW_LESS_CLICKED="SHOW_LESS_CLICKED",r.SHOW_ALL_CATEGORIES_CLICKED="SHOW_ALL_CATEGORIES_CLICKED",r.CATEGORY_NAME_CLICKED="CATEGORY_NAME_CLICKED",r.AGENT_TITLE_CHANGED="AGENT_TITLE_CHANGED",r.PUBLIC_NAME_CHANGED="PUBLIC_NAME_CHANGED",r.CATEGORIES_CHANGED="CATEGORIES_CHANGED",r.AVATAR_CHANGED="AVATAR_CHANGED",r.SHARED_CONVERSATION_OPENED="SHARED_CONVERSATION_OPENED",r.SHARED_AGENT_OPENED="SHARED_AGENT_OPENED",r.SHARE_CONVERSATION_COPIED="SHARE_CONVERSATION_COPIED",r.SHARE_INTENT_CLICKED="SHARE_INTENT_CLICKED",r.PLUS_BUTTON_HOVER="PLUS_BUTTON_HOVER",r.PLUS_BUTTON_TAP="PLUS_BUTTON_TAP",r.PLUS_BUTTON_CLICKED="PLUS_BUTTON_CLICKED",r.FACT_CHECK_OPENED="FACT_CHECK_OPENED",r.FACT_CHECK_CLOSED="FACT_CHECK_CLOSED",r.FACT_CHECK_LOADED="FACT_CHECK_LOADED",r.FACT_CHECK_LINK_CLICKED="FACT_CHECK_LINK_CLICKED",r.FACT_CHECK_REFERENCE_CLICKED="FACT_CHECK_REFERENCE_CLICKED",r.QUERY_FAILED="QUERY_FAILED",r.AGENT_PAGE_START_LOADING="AGENT_PAGE_START_LOADING",r.AGENT_PAGE_LOADED="AGENT_PAGE_LOADED",r.ACTION_LINK_CLICKED="ACTION_LINK_CLICKED",r.WELCOME_MESSAGE_SENT="WELCOME_MESSAGE_SENT",r.AGENT_CREATED_SUCCESSFULLY="AGENT_CREATED_SUCCESSFULLY",r.AGENT_MAKER_LOADED="AGENT_MAKER_LOADED",r.SHARE_AGENT_COPIED="SHARE_AGENT_COPIED",r.RFM_ICONS_HOVERED="RFM_ICONS_HOVERED",r.AGENT_CLICKED_HUB_MENU="AGENT_CLICKED_HUB_MENU",r.AGENT_CLICKED_HUB="AGENT_CLICKED_HUB",r.ADDED_CONTENT="ADDED_CONTENT",r.LOGIN="LOGIN",r.SIGNUP_COMPLETED="SIGNUP_COMPLETED",r.SEARCH_RESULT_CLICKED="SEARCH_RESULT_CLICKED",r.PAGE_LOADED="PAGE_LOADED",r.PAGE_START_LOADING="PAGE_START_LOADING",r.VISITOR_CREATED="VISITOR_CREATED",r.ABOUT_ONEAI_CLICKED="ABOUT_ONEAI_CLICKED",r.USER_ICON_CLICKED="USER_ICON_CLICKED",r.FIRST_SQ_SHOWN="FIRST_SQ_SHOWN",r.UPLOAD_URL_MESSAGE="UPLOAD_URL_MESSAGE",r.UPLOAD_FILE_DRAG="UPLOAD_FILE_DRAG",r.PROGRESS_BAR_UPDATED="PROGRESS_BAR_UPDATED",r.AGENT_CLICKED_HUB_PAGE="AGENT_CLICKED_HUB_PAGE",r.AGENTS_STUDIO_CLICKED="AGENTS_STUDIO_CLICKED",r.LOGIN_CLICKED="LOGIN_CLICKED",r.LOGIN_COMPLETED="LOGIN_COMPLETED",r.SIGNUP_CLICKED="SIGNUP_CLICKED",r.LOGIN_DIALOG_SHOWN="LOGIN_DIALOG_SHOWN",r.AGENT_LINK_CLICK_ACTION="AGENT_LINK_CLICK_ACTION",r.UPLOAD_URL_FIRST_MAKER_MESSAGE="UPLOAD_URL_FIRST_MAKER_MESSAGE",r.BROWSER_REFRESHED="BROWSER_REFRESHED",r.LOGOUT_CLICKED="LOGOUT_CLICKED",r.FEEDBACK_SUBMITED="FEEDBACK_SUBMITED",r.FIRST_CREATE_COMPLETED="FIRST_CREATE_COMPLETED",(a=l||(l={})).HUB="HUB",a.CATEGORIES="CATEGORIES";var i,r,a,o,s,c,u,l,d={profile:"",avatar:"placeholder",public_name:"",display_name:"",agent_id:"",description:"",categories:[],sample_questions:[],message_count:0,org_id:"",star_count:0}},8682:function(e,t,n){n.r(t),n.d(t,{ShareDialog:function(){return U}});var i=n(1010),r=n(4043),a=n(7582),o=n(5893),s=n(2253),c=n(4932),u=n(2496),l=n(4960),d=n(5152),g=n.n(d),p=n(1664),f=n.n(p),h=n(7294),v=g()(function(){return n.e(8205).then(n.bind(n,8205))},{loadableGenerated:{webpack:function(){return[8205]}}}),m=g()(function(){return n.e(8865).then(n.bind(n,8865))},{loadableGenerated:{webpack:function(){return[8865]}}}),_=g()(function(){return n.e(6268).then(n.bind(n,6268))},{loadableGenerated:{webpack:function(){return[6268]}}}),E=g()(function(){return n.e(9996).then(n.bind(n,9996))},{loadableGenerated:{webpack:function(){return[9996]}}}),A=g()(function(){return n.e(8966).then(n.bind(n,8966))},{loadableGenerated:{webpack:function(){return[8966]}}}),x=g()(function(){return n.e(1672).then(n.bind(n,1672))},{loadableGenerated:{webpack:function(){return[1672]}}}),C=function(e){var t=e.link,n=e.title,i=e.agent,a=e.response,s=e.isWidget,c=e.isWidgetSide,l=e.onClickShare,d=(0,r._)((0,h.useState)(!1),2),g=d[0],p=d[1];(0,h.useEffect)(function(){navigator.share&&navigator.canShare({title:"OneAI agent",text:"OneAI agent",url:"test"})&&p(!0)},[]);var f=(0,u.$h)().theme;return(0,o.jsxs)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-x-[42px] max-sm:justify-between md:-ml-4",children:[(0,o.jsx)("span",{className:"hidden md:block"}),(0,o.jsx)("span",{className:"hidden md:block"}),g?null:(0,o.jsx)("span",{className:"hidden md:block"}),(0,o.jsxs)(b,{agent:i,target:"_blank",href:"https://www.facebook.com/sharer.php?u=".concat(t,"&t=").concat(n),name:"facebook",onClickShare:l,children:[(0,o.jsx)(v,{className:"text-lightText dark:text-white"}),(0,o.jsx)("span",{className:"dark:text-white text-black",children:"Facebook"})]}),(0,o.jsxs)(b,{agent:i,target:"_blank",href:"https://api.whatsapp.com/send?&text=".concat(n,": ").concat(t),name:"whatsapp",onClickShare:l,children:[(0,o.jsx)(A,{className:"text-lightText dark:text-white"}),(0,o.jsx)("span",{className:"dark:text-white text-black",children:"WhatsApp"})]}),(0,o.jsxs)(b,{agent:i,target:"_blank",href:"https://twitter.com/intent/tweet?url=".concat(t,"&text=").concat(n),name:"twitter",onClickShare:l,children:[(0,o.jsx)(E,{className:"text-lightText dark:text-white"}),(0,o.jsx)("span",{className:"dark:text-white text-black",children:"Twitter"})]}),(0,o.jsxs)(b,{onClickShare:l,target:"_blank",isCopy:!0,response:a,href:t,className:"md:hidden",name:"copy",children:["light"===f?(0,o.jsx)(_,{className:"text-lightText dark:text-black"}):(0,o.jsx)(m,{className:"text-lightText dark:text-white"}),(0,o.jsxs)("span",{className:"dark:text-white text-black text-ellipsis truncate overflow-x-hidden",children:[" ",s?c?"Copy":"Copy response":"Copy"]})]}),g?(0,o.jsxs)(b,{onClickShare:l,target:"_blank",isShare:!0,href:t,className:"hidden md:block",name:"share_by",children:[(0,o.jsx)(x,{}),(0,o.jsx)("span",{"data-cy":"shared_by_icon",className:"-ml-3 dark:text-white text-black",children:"Share By"})]}):null]})},b=function(e){var t=e.href,n=e.target,i=e.children,r=e.isCopy,a=e.isShare,u=e.className,d=e.name,g=void 0===d?"":d,p=e.agent,h=e.response,v=e.onClickShare,m=(0,l.p)().toast,_=function(){var e=null==t?void 0:t.includes("/share/");void 0!==v&&v((0,c._)((0,s._)({include_conversation:e},e&&{share_id:null==t?void 0:t.split("/").pop()}),{channel:g,shared_url:t}),p)};return r||a||h?(0,o.jsx)("button",{onClick:function(){h?(navigator.clipboard.writeText(h),m("Copied")):r?(navigator.clipboard.writeText(t),m("Copied")):a&&navigator.share({title:"OneAI agent",text:"OneAI agent",url:t}),_()},"aria-label":r?"Copy to clipboard":a?"Share":"",className:"text-lightText hover:opacity-90 place-items-center whitespace-nowrap justify-center text-center font-mono text-xs leading-[30px] grid grid-rows-auto-1fr items-center pt-[18px] ".concat(void 0===u?"":u),children:i}):(0,o.jsx)(f(),{href:t,target:n,onClick:function(){_(),window.open(t,n)},"data-cy":"share_by_".concat(g),className:"text-lightText place-items-center justify-center text-center font-mono text-xs leading-[30px] grid grid-rows-auto-1fr  items-center pt-[18px]",style:{fontFeatureSettings:"clig off, liga off"},children:i})},y=n(2907),w=n(1526),I=n(1016),S=function(e){var t=e.open,n=e.title,i=e.children,r=e.onClick;return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{"data-cy":"accordion_for_".concat(n),className:"font-mono cursor-pointer md:uppercase !rounded-t-md text-lightText text-base leading-[11px] grid grid-cols-auto-1fr items-center font-normal hover:opacity-95",onClick:function(e){e.stopPropagation(),r()},children:[(0,o.jsx)(y.Z,{className:"mr-[6px] transition-transform duration-[0.2s] ease-in-out dark:text-lightText !ext-black fill-lightText  ".concat(t?"rotate-0":"rotate-180")}),n]}),(0,o.jsx)(w.M,{children:t?(0,o.jsx)(I.m.div,{className:"overflow-hidden",animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},initial:{opacity:0,height:0},children:i}):null})]})},T=n(4491),N=function(e){var t=e.label,n=e.name,i=e.checked,r=e.setChecked,a=e.onCheckChange;return(0,o.jsx)("form",{children:(0,o.jsxs)("div",{className:"flex items-center gap-2.5 text-white font-mono",children:[(0,o.jsx)(T.fC,{checked:i,onCheckedChange:function(e){r(e),a&&a(e)},value:i?"on":"off",className:"h-[20px] w-[40px] dark:bg-[#1F1F2C] bg-[#c2c1c5] rounded-[40px] relative shadow-sm focus:shadow-xl data-[state=checked]:dark:bg-white",id:n,children:(0,o.jsx)(T.bU,{className:"block w-[16px] h-[16px] bg-[#AAA6B5] rounded-full shadow-xl transition-transform duration-100 transform translate-x-[4px] will-change-transform data-[state=checked]:dark:bg-black data-[state=checked]:bg-[#5c5b61] data-[state=checked]:translate-x-[20px]"})}),(0,o.jsx)("label",{onClick:function(){r(function(e){return!e})},className:"text-sm text-black dark:text-white font-mono select-none",htmlFor:n,children:t})]})})},D=n(7612),k=n(2425),O=n(4862),L=n(3293),R=n(1779),j=g()(function(){return n.e(7779).then(n.bind(n,7779))},{loadableGenerated:{webpack:function(){return[7779]}}}),P=g()(function(){return n.e(1549).then(n.bind(n,1549))},{loadableGenerated:{webpack:function(){return[1549]}}}),M=g()(function(){return n.e(1425).then(n.bind(n,1425))},{loadableGenerated:{webpack:function(){return[1425]}}}),G=g()(function(){return n.e(7297).then(n.bind(n,7297))},{loadableGenerated:{webpack:function(){return[7297]}}}),U=function(e){var t=e.open,n=e.onClose,i=e.shareId,r=e.isLoading,a=e.publicName,s=e.disableConversation,c=e.buttonId,u=e.agent,l=e.response,d=e.isWidget,g=e.widgetConfig,p=e.agentInfo,f=e.chatScrollState,h=e.triggerEmbedEvent,v=e.triggerEmbedToggleEvent,m=e.triggerConversationClickedEvent,_=e.triggerOnShareEvent,E=e.triggerOnShareAgentEvent,A=e.triggerShareButtonsEvent,x=(0,O.s2)();return(0,o.jsx)(R.fC,{open:t,children:(0,o.jsx)(w.M,{children:t?(0,o.jsxs)(I.m.div,{className:"fixed top-0 left-0 w-full h-full z-20",initial:{y:400,opacity:1},animate:{y:d?x?0:-10:0,opacity:1},exit:{y:400,opacity:0},onClick:function(e){e.stopPropagation(),e.preventDefault()},children:[(0,o.jsx)(R.aV,{asChild:!0,forceMount:!0,children:(0,o.jsx)(I.m.div,{className:"fixed inset-0 z-[200] cursor-pointer dark:bg-background/70",initial:{opacity:0},animate:{opacity:1,y:d&&g.isBubble?-122:0},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},onClick:n})}),(0,o.jsx)(F,{buttonId:c,shareId:i,publicName:a,isLoading:r,disableConversation:s,onClose:n,agent:u,response:l,agentInfo:p,chatScrollState:f,widgetConfig:g,isWidget:d,triggerEmbedEvent:h,triggerEmbedToggleEvent:v,triggerConversationClickedEvent:m,triggerOnShareEvent:_,triggerOnShareAgentEvent:E,triggerShareButtonsEvent:A})]}):null})})},F=function(e){var t,n,s=e.publicName,c=e.shareId,u=e.isLoading,d=e.disableConversation,g=e.onClose,p=e.buttonId,f=e.agent,v=e.response,m=e.agentInfo,_=e.chatScrollState,E=e.widgetConfig,A=e.isWidget,x=e.triggerEmbedEvent,b=e.triggerEmbedToggleEvent,y=e.triggerConversationClickedEvent,w=e.triggerOnShareEvent,T=e.triggerShareButtonsEvent,L=W(m,s||(null==m?void 0:m.publicName)),R=(0,r._)((0,h.useState)(!1),2),P=R[0],M=R[1],U=(0,r._)((0,h.useState)(!d),2),F=U[0],V=U[1],Y=(0,r._)((0,h.useState)({x:0,y:0}),2),J=Y[0],Z=Y[1],q=(0,r._)((0,h.useState)(!1),2),z=q[0],Q=q[1],X=m.publicName,$=H(m,F,c,s),ee=(0,l.p)().toast,et=function(){setTimeout(function(){Q(!0)},150)},en=function(e){e||Q(!1);var t="MIDDLE"===_,n=document.getElementById(t?"desktop_top_actions_middle_".concat(s||X):p?"desktop_top_actions_".concat(s||X,"_").concat(p):"desktop_top_actions_".concat(s||X)),i=A?100:window.innerWidth,r=window.innerHeight,a=P?380:270;if(i<1200||!n)return et(),{x:0,y:0};var o=n.getBoundingClientRect(),c=o.left-165,u=o.right-500,l="MIDDLE"===_?u:c,d=o.top+(t?80:50);return d+a>r&&(d=r-a-20),et(),{x:u+490>i||c+490>i?l-165:l,y:d}};(0,h.useEffect)(function(){return Z(en(!0)),window.addEventListener("resize",function(){Z(en(!0))}),function(){window.removeEventListener("resize",function(){Z(en(!0))})}},[P]);var ei=(t=(0,i._)(function(e){return(0,a.Jh)(this,function(t){return void 0!==y&&y(e),[2]})}),function(e){return t.apply(this,arguments)}),er=(0,O.s2)(),ea=(null==E?void 0:null===(n=E.activeDeviceConfig)||void 0===n?void 0:n.location)==="left";return z?(0,o.jsxs)(I.m.div,{style:{x:0===J.x?void 0:J.x,y:0===J.y?void 0:J.y},"data-cy":"share_dialog_component",className:"rounded-t-[20px] md:!rounded-[5px] grid animate-fade-in overflow-hidden dark:bg-[#302f43] bg-[white] text-white fixed ".concat(A?er?"max-lg:!bottom-0":(null==E?void 0:E.widgetIsSide)?E.justChat?"max-lg:!bottom-0 w-[100%]":"max-lg:!bottom-0 w-[90%]":(null==E?void 0:E.isBubble)?"max-lg:!bottom-[72px] w-[97%] left-[1%]":(null==E?void 0:E.isBottomDesktop)?"max-lg:!-bottom-2 w-full":"max-lg:!bottom-0":"max-lg:!bottom-0 max-lg:left-0 max-lg:right-0","   ").concat(A?(null==E?void 0:E.widgetIsSide)?ea?"max-w-full md:w-[490px] max-lg:!m-auto pt-[30px]":"max-w-full md:w-[490px] max-lg:!right-[0px] pt-[30px]":"max-w-full md:w-[490px] max-lg:!m-auto pt-[30px] ":"max-w-[490px] md:w-[490px]  py-[30px] ","  px-5 m-auto z-[10000]"),children:[(0,o.jsx)(B,{onClose:g,isWidget:A}),d?(0,o.jsx)("span",{className:"h-[22px]"}):null,(0,o.jsxs)("div",{className:"grid relative grid-cols-auto-1fr gap-x-2 items-center ".concat(d?"hidden":""),children:[(0,o.jsx)(N,{name:"includeConversation",label:"Include Conversation",checked:F,setChecked:V,onCheckChange:ei}),(0,o.jsx)(D.default,{text:"Include all messages from this conversation",align:"center",children:(0,o.jsx)("figure",{children:(0,o.jsx)(G,{})})})]}),(0,o.jsxs)("div",{className:"pt-4 pb-[30px] md:pb-[33px]",children:[u&&F?(0,o.jsx)(k.LoaderMiniCentered,{className:"h-8 w-8 mt-6"}):(0,o.jsx)(K,{includeConv:F,link:$,agent:f,isWidget:A,triggerOnShareEvent:w}),(0,o.jsx)(C,{response:v,agent:f,link:$,title:"OneAI agent - "+m.publicName,isWidgetSide:null==E?void 0:E.widgetIsSide,onClickShare:T})]}),A?null:(0,o.jsx)(S,{open:P,title:"Embed on Website",onClick:function(){M(function(e){return e||void 0===b||b(f),!e})},children:(0,o.jsxs)("div",{"data-cy":"embed_code_copy",className:"!mt-5 break-all whitespace-pre-wrap bg-background font-mono py-4 px-4 pr-8 relative text-lightText hover:border-black border border-background rounded-[5px] cursor-pointer hover:bg-lightBackground duration-300 active:bg-background",onClick:function(){void 0!==x&&x(f),navigator.clipboard.writeText(L),ee("Copied")},tabIndex:0,children:[L,(0,o.jsx)(j,{className:"absolute top-4 right-4"})]})})]}):null},B=function(e){var t=e.onClose,n=e.isWidget;return(0,o.jsx)("button",{className:"absolute top-[30px] right-5 z-40 ".concat(n?"":"hidden md:block "),"aria-label":"Close share dialog",onClick:t,children:(0,o.jsx)("figure",{children:(0,o.jsx)(P,{})})})},K=function(e){var t=e.link,n=e.includeConv,i=e.agent,a=e.isWidget,s=e.triggerOnShareAgentEvent,c=e.triggerOnShareEvent,u=(0,r._)((0,h.useState)(!1),2),d=u[0],g=u[1],p=(0,l.p)().toast;(0,h.useEffect)(function(){navigator.share&&navigator.canShare({title:"OneAI agent",text:"OneAI agent",url:"test"})&&g(!0)},[]);var f=function(){n&&t.includes("/share/")?void 0!==c&&c({shared_url:t,shared_id:t.split("/").pop(),include_conversation:n}):void 0!==s&&s({shared_url:t,shared_id:t.split("/").pop(),include_conversation:n},i),navigator.clipboard.writeText(t),window.history.pushState({},"",t),p("Copied")};return(0,o.jsxs)("div",{className:"grid grid-cols-1fr-auto pb-1",children:[(0,o.jsx)("input",{"data-cy":"share_link_text_in_copy",onClick:function(e){e.currentTarget.select()},onChange:function(){},value:t,className:"w-full dark:bg-background bg-backgroundOverlayLight text-lightText dark:text-white text-sm truncate text-ellipsis rounded-l-[5px] focus:outline-none px-4 grid h-[43px]  ".concat(d?"":"!rounded-r-[5px]")}),d&&!a?(0,o.jsx)("button",{"aria-label":"Copy to clipboard",onClick:function(){try{navigator.share({title:"OneAI agent",text:"OneAI agent",url:t})}catch(e){f()}},className:"w-[60px] md:hidden rounded-r-[5px] h-[43px] grid place-items-center bg-blue hover:bg-opacity-70",children:(0,o.jsx)("figure",{className:"md:hidden",children:(0,o.jsx)(M,{})})}):null,(0,o.jsx)("button",{"aria-label":"Copy to clipboard","data-cy":"share_link_copy_button",onClick:f,className:"md:w-[96px] ".concat(a?"grid px-4":"hidden md:grid"," rounded-r-[5px] h-[43px] place-items-center bg-blue hover:bg-opacity-70"),children:(0,o.jsxs)("figure",{className:"grid grid-cols-auto-1fr gap-x-2 items-center",children:[(0,o.jsx)(j,{className:"!text-white"}),(0,o.jsx)("span",{className:"uppercase text-white font-mono text-sm",children:"Copy"})]})})]})},H=function(e,t,n,i){return t&&n?"".concat(L.aY,"/~").concat(i||e.publicName,"/share/").concat(n):"".concat(L.aY,"/~").concat(i||e.publicName,"?share=true")},W=function(e,t){return t?'<script id="oneai-snippet" src="'.concat(L.aY,"/~widget?id=").concat(t,'" defer></script>'):""}},7612:function(e,t,n){n.r(t),n.d(t,{AppTooltip:function(){return c}});var i=n(4043),r=n(5893),a=n(7356),o=n(1016),s=n(7294),c=function(e){var t=e.children,n=e.text,c=e.align,u=(0,i._)((0,s.useState)(!1),2),l=u[0],d=u[1];if(!n)return t;var g=function(){d(!0)},p=function(){d(!1)};return(0,r.jsx)(a.zt,{children:(0,r.jsxs)(a.fC,{delayDuration:50,open:l,children:[(0,r.jsx)(a.xz,{className:"w-min",type:"button",asChild:!0,onMouseEnter:g,onMouseLeave:p,onFocus:g,onBlur:p,children:t}),(0,r.jsx)(a.h_,{children:(0,r.jsxs)(a.VY,{className:"dark:bg-lightBackground bg-overlayLight animate-fade-in duration-300 z-[2000] transition-all py-4 px-3 max-w-[300px] max-h-[300px] overflow-y-auto overflow-x-hidden text-pink dark:text-cyan font-mono",side:"bottom",align:void 0===c?"end":c,sideOffset:10,children:[n,(0,r.jsx)(o.m.div,{className:"text-background w-[14px] h-[14px] absolute -top-[6px] right-0 transform -translate-x-[90%] rotate-45 z-[1]"})]})})]})})};t.default=c},2425:function(e,t,n){n.r(t),n.d(t,{Loader:function(){return o},LoaderMini:function(){return r},LoaderMiniCentered:function(){return a}});var i=n(5893),r=function(e){var t=e.className;return(0,i.jsx)(o,{className:void 0===t?"!w-6 !h-6":t})},a=function(e){var t=e.className;return(0,i.jsx)("div",{className:"grid items-center justify-center",children:(0,i.jsx)(o,{className:void 0===t?"!w-6 !h-6 py-2":t})})},o=function(e){var t=e.className;return(0,i.jsxs)("div",{role:"status",className:"grid items-center justify-self-center w-fit",children:[(0,i.jsxs)("svg",{"aria-hidden":"true",className:"w-8 h-8 animate-spin text-center text-lightText fill-backgroundSecondary ".concat(void 0===t?"w-12 h-12":t," justfiy-self-center w-fit"),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),(0,i.jsx)("span",{className:"sr-only",children:"Loading"})]})}},1171:function(e,t,n){n.d(t,{x:function(){return c}});var i=n(1010),r=n(7582),a=n(9736),o=n(3293),s=n(7294),c=function(e){var t,n=e.firebaseUser,c=e.userInfo,u=c.temporaryUserId,l=c.userId,d=c.apiKey,g=c.isTemporaryUser,p=(0,a.fP)().getCookie,f=p(o.F4),h=p(o.XR),v=(0,s.useRef)();return v.current=(null==n?void 0:n.apiKey)||d||h,{awaitApiKey:(t=(0,i._)(function(){var e,t,a,s,c=arguments;return(0,r.Jh)(this,function(d){return(e=c.length>0&&void 0!==c[0]?c[0]:200,t=c.length>1&&void 0!==c[1]?c[1]:15,a=!!(!l||u)&&!n&&(!f||(null==f?void 0:f.includes("-"))),s=!!(l||p(o.F4))&&!g,a||(null==l?void 0:l.includes("-")))?[2,"ANONYMOUS"]:[2,new Promise(function(a,o){var c=setInterval((0,i._)(function(){return(0,r.Jh)(this,function(e){return s&&v.current&&(null==n?void 0:n.email)||!s&&v.current?(a(v.current),clearInterval(c)):t<=1&&(o(),clearInterval(c)),t>0&&t--,[2]})}),e)})]})}),function(){return t.apply(this,arguments)})}}},9664:function(e,t,n){n.d(t,{L:function(){return c}});var i=n(1010),r=n(8421),a=n(7582),o=n(4862),s=n(1758),c=function(e){var t=e.setUserInfo,n=(0,s.kY)();return(0,s.ZP)(("undefined"==typeof document?"undefined":(0,r._)(document))!=void 0?"userGeolocation":null,(0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,o.Yo)()];case 1:return[2,e.sent()]}})}),{keepPreviousData:!0,revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnMount:!n.cache.get("userGeolocation"),revalidateOnReconnect:!1,dedupingInterval:999999999999,onSuccess:function(e){e&&t({geoLocation:e})}})}}}]);